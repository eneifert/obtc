(function($){jQuery(document).ready(function(){$("#cform").submit(function(){var action=$(this).attr("action");$("#message").slideUp(750,function(){$("#message").hide();$("#submit").before('<img src="images/ajax-loader.gif" class="contact-loader" />').attr("disabled","disabled");$.post(action,{name:$("#name").val(),email:$("#email").val(),comments:$("#comments").val()},function(data){document.getElementById("message").innerHTML=data;$("#message").slideDown("slow");$("#cform img.contact-loader").fadeOut("slow",function(){$(this).remove();});$("#submit").removeAttr("disabled");if(data.match("success")!=null){$("#cform").slideUp("slow");}});});return false;});});}(jQuery));(function($){(function($){$(function(){jQuery("#loopedSlider").prepend("<a href='#' class='previous'>&lt;</a><a href='#' class='next'>&gt;</a>");jQuery("#loopedSlider").loopedSlider({autoHeight:500});});});var windowWidth=$(window).width();var windowHeight=$(window).height();$(".banner").css({width:windowWidth,height:windowHeight-"60"});$(window).load(function(){var $container=$(".portfolioContainer");$container.isotope({filter:"*",animationOptions:{duration:750,easing:"linear",queue:false}});$(".portfolioFilter a").click(function(){$(".portfolioFilter .current").removeClass("current");$(this).addClass("current");var selector=$(this).attr("data-filter");$container.isotope({filter:selector,animationOptions:{duration:750,easing:"linear",queue:false}});return false;});});jQuery(function($){var $chosenSheet,$stylesheets=$("a[id^=theme-]");$(".lb").rlightbox();$(".lb_title-overwritten").rlightbox({overwriteTitle:true});});$(document).ready(function(e){var index=0;$(document).scroll(function(){var top=$(".technical").height()-$(window).scrollTop();console.log(top);if(top<-300){if(index==0){$(".chart").easyPieChart({easing:"easeOutBounce",onStep:function(from,to,percent){$(this.el).find(".percent").text(Math.round(percent));}});}index++;}});});$(function(){$("a[href*=#]:not([href=#])").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var target=$(this.hash);target=target.length?target:$("[name="+this.hash.slice(1)+"]");if(target.length){$("html,body").animate({scrollTop:target.offset().top-60},1000);return false;}}});});$(window).load(function(){var chart=window.chart=$(".chart").data("easyPieChart");$(".js_update").on("click",function(){chart.update(Math.random()*100);});});}(jQuery));
/*!
 * Bootstrap v3.0.2 by @fat and @mdo
 * Copyright 2013 Twitter, Inc.
 * Licensed under http://www.apache.org/licenses/LICENSE-2.0
 *
 * Designed and built with all the love in the world by @mdo and @fat.
 */
;if(typeof jQuery==="undefined"){throw new Error("Bootstrap requires jQuery");}+function($){function transitionEnd(){var el=document.createElement("bootstrap");var transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var name in transEndEventNames){if(el.style[name]!==undefined){return{end:transEndEventNames[name]};}}}$.fn.emulateTransitionEnd=function(duration){var called=false,$el=this;$(this).one($.support.transition.end,function(){called=true;});var callback=function(){if(!called){$($el).trigger($.support.transition.end);}};setTimeout(callback,duration);return this;};$(function(){$.support.transition=transitionEnd();});}(jQuery);+function($){var dismiss='[data-dismiss="alert"]';var Alert=function(el){$(el).on("click",dismiss,this.close);};Alert.prototype.close=function(e){var $this=$(this);var selector=$this.attr("data-target");if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"");}var $parent=$(selector);if(e){e.preventDefault();}if(!$parent.length){$parent=$this.hasClass("alert")?$this:$this.parent();}$parent.trigger(e=$.Event("close.bs.alert"));if(e.isDefaultPrevented()){return;}$parent.removeClass("in");function removeElement(){$parent.trigger("closed.bs.alert").remove();}$.support.transition&&$parent.hasClass("fade")?$parent.one($.support.transition.end,removeElement).emulateTransitionEnd(150):removeElement();};var old=$.fn.alert;$.fn.alert=function(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.alert");if(!data){$this.data("bs.alert",(data=new Alert(this)));}if(typeof option=="string"){data[option].call($this);}});};$.fn.alert.Constructor=Alert;$.fn.alert.noConflict=function(){$.fn.alert=old;return this;};$(document).on("click.bs.alert.data-api",dismiss,Alert.prototype.close);}(jQuery);+function($){var Button=function(element,options){this.$element=$(element);this.options=$.extend({},Button.DEFAULTS,options);};Button.DEFAULTS={loadingText:"loading..."};Button.prototype.setState=function(state){var d="disabled";var $el=this.$element;var val=$el.is("input")?"val":"html";var data=$el.data();state=state+"Text";if(!data.resetText){$el.data("resetText",$el[val]());}$el[val](data[state]||this.options[state]);setTimeout(function(){state=="loadingText"?$el.addClass(d).attr(d,d):$el.removeClass(d).removeAttr(d);},0);};Button.prototype.toggle=function(){var $parent=this.$element.closest('[data-toggle="buttons"]');if($parent.length){var $input=this.$element.find("input").prop("checked",!this.$element.hasClass("active")).trigger("change");if($input.prop("type")==="radio"){$parent.find(".active").removeClass("active");}}this.$element.toggleClass("active");};var old=$.fn.button;$.fn.button=function(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.button");var options=typeof option=="object"&&option;if(!data){$this.data("bs.button",(data=new Button(this,options)));}if(option=="toggle"){data.toggle();}else{if(option){data.setState(option);}}});};$.fn.button.Constructor=Button;$.fn.button.noConflict=function(){$.fn.button=old;return this;};$(document).on("click.bs.button.data-api","[data-toggle^=button]",function(e){var $btn=$(e.target);if(!$btn.hasClass("btn")){$btn=$btn.closest(".btn");}$btn.button("toggle");e.preventDefault();});}(jQuery);+function($){var Carousel=function(element,options){this.$element=$(element);this.$indicators=this.$element.find(".carousel-indicators");this.options=options;this.paused=this.sliding=this.interval=this.$active=this.$items=null;this.options.pause=="hover"&&this.$element.on("mouseenter",$.proxy(this.pause,this)).on("mouseleave",$.proxy(this.cycle,this));};Carousel.DEFAULTS={interval:5000,pause:"hover",wrap:true};Carousel.prototype.cycle=function(e){e||(this.paused=false);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval));return this;};Carousel.prototype.getActiveIndex=function(){this.$active=this.$element.find(".item.active");this.$items=this.$active.parent().children();return this.$items.index(this.$active);};Carousel.prototype.to=function(pos){var that=this;var activeIndex=this.getActiveIndex();if(pos>(this.$items.length-1)||pos<0){return;}if(this.sliding){return this.$element.one("slid",function(){that.to(pos);});}if(activeIndex==pos){return this.pause().cycle();}return this.slide(pos>activeIndex?"next":"prev",$(this.$items[pos]));};Carousel.prototype.pause=function(e){e||(this.paused=true);if(this.$element.find(".next, .prev").length&&$.support.transition.end){this.$element.trigger($.support.transition.end);this.cycle(true);}this.interval=clearInterval(this.interval);return this;};Carousel.prototype.next=function(){if(this.sliding){return;}return this.slide("next");};Carousel.prototype.prev=function(){if(this.sliding){return;}return this.slide("prev");};Carousel.prototype.slide=function(type,next){var $active=this.$element.find(".item.active");var $next=next||$active[type]();var isCycling=this.interval;var direction=type=="next"?"left":"right";var fallback=type=="next"?"first":"last";var that=this;if(!$next.length){if(!this.options.wrap){return;}$next=this.$element.find(".item")[fallback]();}this.sliding=true;isCycling&&this.pause();var e=$.Event("slide.bs.carousel",{relatedTarget:$next[0],direction:direction});if($next.hasClass("active")){return;}if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");this.$element.one("slid",function(){var $nextIndicator=$(that.$indicators.children()[that.getActiveIndex()]);$nextIndicator&&$nextIndicator.addClass("active");});}if($.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(e);if(e.isDefaultPrevented()){return;}$next.addClass(type);$next[0].offsetWidth;$active.addClass(direction);$next.addClass(direction);$active.one($.support.transition.end,function(){$next.removeClass([type,direction].join(" ")).addClass("active");$active.removeClass(["active",direction].join(" "));that.sliding=false;setTimeout(function(){that.$element.trigger("slid");},0);}).emulateTransitionEnd(600);}else{this.$element.trigger(e);if(e.isDefaultPrevented()){return;}$active.removeClass("active");$next.addClass("active");this.sliding=false;this.$element.trigger("slid");}isCycling&&this.cycle();return this;};var old=$.fn.carousel;$.fn.carousel=function(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.carousel");var options=$.extend({},Carousel.DEFAULTS,$this.data(),typeof option=="object"&&option);var action=typeof option=="string"?option:options.slide;if(!data){$this.data("bs.carousel",(data=new Carousel(this,options)));}if(typeof option=="number"){data.to(option);}else{if(action){data[action]();}else{if(options.interval){data.pause().cycle();}}}});};$.fn.carousel.Constructor=Carousel;$.fn.carousel.noConflict=function(){$.fn.carousel=old;return this;};$(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(e){var $this=$(this),href;var $target=$($this.attr("data-target")||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""));var options=$.extend({},$target.data(),$this.data());var slideIndex=$this.attr("data-slide-to");if(slideIndex){options.interval=false;}$target.carousel(options);if(slideIndex=$this.attr("data-slide-to")){$target.data("bs.carousel").to(slideIndex);}e.preventDefault();});$(window).on("load",function(){$('[data-ride="carousel"]').each(function(){var $carousel=$(this);$carousel.carousel($carousel.data());});});}(jQuery);+function($){var Collapse=function(element,options){this.$element=$(element);this.options=$.extend({},Collapse.DEFAULTS,options);this.transitioning=null;if(this.options.parent){this.$parent=$(this.options.parent);}if(this.options.toggle){this.toggle();}};Collapse.DEFAULTS={toggle:true};Collapse.prototype.dimension=function(){var hasWidth=this.$element.hasClass("width");return hasWidth?"width":"height";};Collapse.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in")){return;}var startEvent=$.Event("show.bs.collapse");this.$element.trigger(startEvent);if(startEvent.isDefaultPrevented()){return;}var actives=this.$parent&&this.$parent.find("> .panel > .in");if(actives&&actives.length){var hasData=actives.data("bs.collapse");if(hasData&&hasData.transitioning){return;}actives.collapse("hide");hasData||actives.data("bs.collapse",null);}var dimension=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[dimension](0);this.transitioning=1;var complete=function(){this.$element.removeClass("collapsing").addClass("in")[dimension]("auto");this.transitioning=0;this.$element.trigger("shown.bs.collapse");};if(!$.support.transition){return complete.call(this);}var scrollSize=$.camelCase(["scroll",dimension].join("-"));this.$element.one($.support.transition.end,$.proxy(complete,this)).emulateTransitionEnd(350)[dimension](this.$element[0][scrollSize]);};Collapse.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in")){return;}var startEvent=$.Event("hide.bs.collapse");this.$element.trigger(startEvent);if(startEvent.isDefaultPrevented()){return;}var dimension=this.dimension();this.$element[dimension](this.$element[dimension]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse").removeClass("in");this.transitioning=1;var complete=function(){this.transitioning=0;this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse");};if(!$.support.transition){return complete.call(this);}this.$element[dimension](0).one($.support.transition.end,$.proxy(complete,this)).emulateTransitionEnd(350);};Collapse.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]();};var old=$.fn.collapse;$.fn.collapse=function(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.collapse");var options=$.extend({},Collapse.DEFAULTS,$this.data(),typeof option=="object"&&option);if(!data){$this.data("bs.collapse",(data=new Collapse(this,options)));}if(typeof option=="string"){data[option]();}});};$.fn.collapse.Constructor=Collapse;$.fn.collapse.noConflict=function(){$.fn.collapse=old;return this;};$(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(e){var $this=$(this),href;var target=$this.attr("data-target")||e.preventDefault()||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"");var $target=$(target);var data=$target.data("bs.collapse");var option=data?"toggle":$this.data();var parent=$this.attr("data-parent");var $parent=parent&&$(parent);if(!data||!data.transitioning){if($parent){$parent.find('[data-toggle=collapse][data-parent="'+parent+'"]').not($this).addClass("collapsed");}$this[$target.hasClass("in")?"addClass":"removeClass"]("collapsed");}$target.collapse(option);});}(jQuery);+function($){var backdrop=".dropdown-backdrop";var toggle="[data-toggle=dropdown]";var Dropdown=function(element){var $el=$(element).on("click.bs.dropdown",this.toggle);};Dropdown.prototype.toggle=function(e){var $this=$(this);if($this.is(".disabled, :disabled")){return;}var $parent=getParent($this);var isActive=$parent.hasClass("open");clearMenus();if(!isActive){if("ontouchstart" in document.documentElement&&!$parent.closest(".navbar-nav").length){$('<div class="dropdown-backdrop"/>').insertAfter($(this)).on("click",clearMenus);}$parent.trigger(e=$.Event("show.bs.dropdown"));if(e.isDefaultPrevented()){return;}$parent.toggleClass("open").trigger("shown.bs.dropdown");$this.focus();}return false;};Dropdown.prototype.keydown=function(e){if(!/(38|40|27)/.test(e.keyCode)){return;}var $this=$(this);e.preventDefault();e.stopPropagation();if($this.is(".disabled, :disabled")){return;}var $parent=getParent($this);var isActive=$parent.hasClass("open");if(!isActive||(isActive&&e.keyCode==27)){if(e.which==27){$parent.find(toggle).focus();}return $this.click();}var $items=$("[role=menu] li:not(.divider):visible a",$parent);if(!$items.length){return;}var index=$items.index($items.filter(":focus"));if(e.keyCode==38&&index>0){index--;}if(e.keyCode==40&&index<$items.length-1){index++;}if(!~index){index=0;}$items.eq(index).focus();};function clearMenus(){$(backdrop).remove();$(toggle).each(function(e){var $parent=getParent($(this));if(!$parent.hasClass("open")){return;}$parent.trigger(e=$.Event("hide.bs.dropdown"));if(e.isDefaultPrevented()){return;}$parent.removeClass("open").trigger("hidden.bs.dropdown");});}function getParent($this){var selector=$this.attr("data-target");if(!selector){selector=$this.attr("href");selector=selector&&/#/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,"");}var $parent=selector&&$(selector);return $parent&&$parent.length?$parent:$this.parent();}var old=$.fn.dropdown;$.fn.dropdown=function(option){return this.each(function(){var $this=$(this);var data=$this.data("dropdown");if(!data){$this.data("dropdown",(data=new Dropdown(this)));}if(typeof option=="string"){data[option].call($this);}});};$.fn.dropdown.Constructor=Dropdown;$.fn.dropdown.noConflict=function(){$.fn.dropdown=old;return this;};$(document).on("click.bs.dropdown.data-api",clearMenus).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation();}).on("click.bs.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.bs.dropdown.data-api",toggle+", [role=menu]",Dropdown.prototype.keydown);}(jQuery);+function($){var Modal=function(element,options){this.options=options;this.$element=$(element);this.$backdrop=this.isShown=null;if(this.options.remote){this.$element.load(this.options.remote);}};Modal.DEFAULTS={backdrop:true,keyboard:true,show:true};Modal.prototype.toggle=function(_relatedTarget){return this[!this.isShown?"show":"hide"](_relatedTarget);};Modal.prototype.show=function(_relatedTarget){var that=this;var e=$.Event("show.bs.modal",{relatedTarget:_relatedTarget});this.$element.trigger(e);if(this.isShown||e.isDefaultPrevented()){return;}this.isShown=true;this.escape();this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',$.proxy(this.hide,this));this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");if(!that.$element.parent().length){that.$element.appendTo(document.body);}that.$element.show();if(transition){that.$element[0].offsetWidth;}that.$element.addClass("in").attr("aria-hidden",false);that.enforceFocus();var e=$.Event("shown.bs.modal",{relatedTarget:_relatedTarget});transition?that.$element.find(".modal-dialog").one($.support.transition.end,function(){that.$element.focus().trigger(e);}).emulateTransitionEnd(300):that.$element.focus().trigger(e);});};Modal.prototype.hide=function(e){if(e){e.preventDefault();}e=$.Event("hide.bs.modal");this.$element.trigger(e);if(!this.isShown||e.isDefaultPrevented()){return;}this.isShown=false;this.escape();$(document).off("focusin.bs.modal");this.$element.removeClass("in").attr("aria-hidden",true).off("click.dismiss.modal");$.support.transition&&this.$element.hasClass("fade")?this.$element.one($.support.transition.end,$.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal();};Modal.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(e){if(this.$element[0]!==e.target&&!this.$element.has(e.target).length){this.$element.focus();}},this));};Modal.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on("keyup.dismiss.bs.modal",$.proxy(function(e){e.which==27&&this.hide();},this));}else{if(!this.isShown){this.$element.off("keyup.dismiss.bs.modal");}}};Modal.prototype.hideModal=function(){var that=this;this.$element.hide();this.backdrop(function(){that.removeBackdrop();that.$element.trigger("hidden.bs.modal");});};Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null;};Modal.prototype.backdrop=function(callback){var that=this;var animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').appendTo(document.body);this.$element.on("click.dismiss.modal",$.proxy(function(e){if(e.target!==e.currentTarget){return;}this.options.backdrop=="static"?this.$element[0].focus.call(this.$element[0]):this.hide.call(this);},this));if(doAnimate){this.$backdrop[0].offsetWidth;}this.$backdrop.addClass("in");if(!callback){return;}doAnimate?this.$backdrop.one($.support.transition.end,callback).emulateTransitionEnd(150):callback();}else{if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one($.support.transition.end,callback).emulateTransitionEnd(150):callback();}else{if(callback){callback();}}}};var old=$.fn.modal;$.fn.modal=function(option,_relatedTarget){return this.each(function(){var $this=$(this);var data=$this.data("bs.modal");var options=$.extend({},Modal.DEFAULTS,$this.data(),typeof option=="object"&&option);if(!data){$this.data("bs.modal",(data=new Modal(this,options)));}if(typeof option=="string"){data[option](_relatedTarget);}else{if(options.show){data.show(_relatedTarget);}}});};$.fn.modal.Constructor=Modal;$.fn.modal.noConflict=function(){$.fn.modal=old;return this;};$(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this);var href=$this.attr("href");var $target=$($this.attr("data-target")||(href&&href.replace(/.*(?=#[^\s]+$)/,"")));var option=$target.data("modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());e.preventDefault();$target.modal(option,this).one("hide",function(){$this.is(":visible")&&$this.focus();});});$(document).on("show.bs.modal",".modal",function(){$(document.body).addClass("modal-open");}).on("hidden.bs.modal",".modal",function(){$(document.body).removeClass("modal-open");});}(jQuery);+function($){var Tooltip=function(element,options){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",element,options);};Tooltip.DEFAULTS={animation:true,placement:"top",selector:false,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false};Tooltip.prototype.init=function(type,element,options){this.enabled=true;this.type=type;this.$element=$(element);this.options=this.getOptions(options);var triggers=this.options.trigger.split(" ");for(var i=triggers.length;i--;){var trigger=triggers[i];if(trigger=="click"){this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this));}else{if(trigger!="manual"){var eventIn=trigger=="hover"?"mouseenter":"focus";var eventOut=trigger=="hover"?"mouseleave":"blur";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this));this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this));}}}this.options.selector?(this._options=$.extend({},this.options,{trigger:"manual",selector:""})):this.fixTitle();};Tooltip.prototype.getDefaults=function(){return Tooltip.DEFAULTS;};Tooltip.prototype.getOptions=function(options){options=$.extend({},this.getDefaults(),this.$element.data(),options);if(options.delay&&typeof options.delay=="number"){options.delay={show:options.delay,hide:options.delay};}return options;};Tooltip.prototype.getDelegateOptions=function(){var options={};var defaults=this.getDefaults();this._options&&$.each(this._options,function(key,value){if(defaults[key]!=value){options[key]=value;}});return options;};Tooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);clearTimeout(self.timeout);self.hoverState="in";if(!self.options.delay||!self.options.delay.show){return self.show();}self.timeout=setTimeout(function(){if(self.hoverState=="in"){self.show();}},self.options.delay.show);};Tooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);clearTimeout(self.timeout);self.hoverState="out";if(!self.options.delay||!self.options.delay.hide){return self.hide();}self.timeout=setTimeout(function(){if(self.hoverState=="out"){self.hide();}},self.options.delay.hide);};Tooltip.prototype.show=function(){var e=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);if(e.isDefaultPrevented()){return;}var $tip=this.tip();this.setContent();if(this.options.animation){$tip.addClass("fade");}var placement=typeof this.options.placement=="function"?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement;var autoToken=/\s?auto?\s?/i;var autoPlace=autoToken.test(placement);if(autoPlace){placement=placement.replace(autoToken,"")||"top";}$tip.detach().css({top:0,left:0,display:"block"}).addClass(placement);this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);var pos=this.getPosition();var actualWidth=$tip[0].offsetWidth;var actualHeight=$tip[0].offsetHeight;if(autoPlace){var $parent=this.$element.parent();var orgPlacement=placement;var docScroll=document.documentElement.scrollTop||document.body.scrollTop;var parentWidth=this.options.container=="body"?window.innerWidth:$parent.outerWidth();var parentHeight=this.options.container=="body"?window.innerHeight:$parent.outerHeight();var parentLeft=this.options.container=="body"?0:$parent.offset().left;placement=placement=="bottom"&&pos.top+pos.height+actualHeight-docScroll>parentHeight?"top":placement=="top"&&pos.top-docScroll-actualHeight<0?"bottom":placement=="right"&&pos.right+actualWidth>parentWidth?"left":placement=="left"&&pos.left-actualWidth<parentLeft?"right":placement;$tip.removeClass(orgPlacement).addClass(placement);}var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement);this.$element.trigger("shown.bs."+this.type);}};Tooltip.prototype.applyPlacement=function(offset,placement){var replace;var $tip=this.tip();var width=$tip[0].offsetWidth;var height=$tip[0].offsetHeight;var marginTop=parseInt($tip.css("margin-top"),10);var marginLeft=parseInt($tip.css("margin-left"),10);if(isNaN(marginTop)){marginTop=0;}if(isNaN(marginLeft)){marginLeft=0;}offset.top=offset.top+marginTop;offset.left=offset.left+marginLeft;$tip.offset(offset).addClass("in");var actualWidth=$tip[0].offsetWidth;var actualHeight=$tip[0].offsetHeight;if(placement=="top"&&actualHeight!=height){replace=true;offset.top=offset.top+height-actualHeight;}if(/bottom|top/.test(placement)){var delta=0;if(offset.left<0){delta=offset.left*-2;offset.left=0;$tip.offset(offset);actualWidth=$tip[0].offsetWidth;actualHeight=$tip[0].offsetHeight;}this.replaceArrow(delta-width+actualWidth,actualWidth,"left");}else{this.replaceArrow(actualHeight-height,actualHeight,"top");}if(replace){$tip.offset(offset);}};Tooltip.prototype.replaceArrow=function(delta,dimension,position){this.arrow().css(position,delta?(50*(1-delta/dimension)+"%"):"");};Tooltip.prototype.setContent=function(){var $tip=this.tip();var title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title);$tip.removeClass("fade in top bottom left right");};Tooltip.prototype.hide=function(){var that=this;var $tip=this.tip();var e=$.Event("hide.bs."+this.type);function complete(){if(that.hoverState!="in"){$tip.detach();}}this.$element.trigger(e);if(e.isDefaultPrevented()){return;}$tip.removeClass("in");$.support.transition&&this.$tip.hasClass("fade")?$tip.one($.support.transition.end,complete).emulateTransitionEnd(150):complete();this.$element.trigger("hidden.bs."+this.type);return this;};Tooltip.prototype.fixTitle=function(){var $e=this.$element;if($e.attr("title")||typeof($e.attr("data-original-title"))!="string"){$e.attr("data-original-title",$e.attr("title")||"").attr("title","");}};Tooltip.prototype.hasContent=function(){return this.getTitle();};Tooltip.prototype.getPosition=function(){var el=this.$element[0];return $.extend({},(typeof el.getBoundingClientRect=="function")?el.getBoundingClientRect():{width:el.offsetWidth,height:el.offsetHeight},this.$element.offset());};Tooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return placement=="bottom"?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:placement=="top"?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:placement=="left"?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width};};Tooltip.prototype.getTitle=function(){var title;var $e=this.$element;var o=this.options;title=$e.attr("data-original-title")||(typeof o.title=="function"?o.title.call($e[0]):o.title);return title;};Tooltip.prototype.tip=function(){return this.$tip=this.$tip||$(this.options.template);};Tooltip.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow");};Tooltip.prototype.validate=function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null;}};Tooltip.prototype.enable=function(){this.enabled=true;};Tooltip.prototype.disable=function(){this.enabled=false;};Tooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled;};Tooltip.prototype.toggle=function(e){var self=e?$(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;self.tip().hasClass("in")?self.leave(self):self.enter(self);};Tooltip.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type);};var old=$.fn.tooltip;$.fn.tooltip=function(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.tooltip");var options=typeof option=="object"&&option;if(!data){$this.data("bs.tooltip",(data=new Tooltip(this,options)));}if(typeof option=="string"){data[option]();}});};$.fn.tooltip.Constructor=Tooltip;$.fn.tooltip.noConflict=function(){$.fn.tooltip=old;return this;};}(jQuery);+function($){var Popover=function(element,options){this.init("popover",element,options);};if(!$.fn.tooltip){throw new Error("Popover requires tooltip.js");}Popover.DEFAULTS=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype);Popover.prototype.constructor=Popover;Popover.prototype.getDefaults=function(){return Popover.DEFAULTS;};Popover.prototype.setContent=function(){var $tip=this.tip();var title=this.getTitle();var content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title);$tip.find(".popover-content")[this.options.html?"html":"text"](content);$tip.removeClass("fade top bottom left right in");if(!$tip.find(".popover-title").html()){$tip.find(".popover-title").hide();}};Popover.prototype.hasContent=function(){return this.getTitle()||this.getContent();};Popover.prototype.getContent=function(){var $e=this.$element;var o=this.options;return $e.attr("data-content")||(typeof o.content=="function"?o.content.call($e[0]):o.content);};Popover.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow");};Popover.prototype.tip=function(){if(!this.$tip){this.$tip=$(this.options.template);}return this.$tip;};var old=$.fn.popover;$.fn.popover=function(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.popover");var options=typeof option=="object"&&option;if(!data){$this.data("bs.popover",(data=new Popover(this,options)));}if(typeof option=="string"){data[option]();}});};$.fn.popover.Constructor=Popover;$.fn.popover.noConflict=function(){$.fn.popover=old;return this;};}(jQuery);+function($){function ScrollSpy(element,options){var href;var process=$.proxy(this.process,this);this.$element=$(element).is("body")?$(window):$(element);this.$body=$("body");this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",process);this.options=$.extend({},ScrollSpy.DEFAULTS,options);this.selector=(this.options.target||((href=$(element).attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""))||"")+" .nav li > a";this.offsets=$([]);this.targets=$([]);this.activeTarget=null;this.refresh();this.process();}ScrollSpy.DEFAULTS={offset:10};ScrollSpy.prototype.refresh=function(){var offsetMethod=this.$element[0]==window?"offset":"position";this.offsets=$([]);this.targets=$([]);var self=this;var $targets=this.$body.find(this.selector).map(function(){var $el=$(this);var href=$el.data("target")||$el.attr("href");var $href=/^#\w/.test(href)&&$(href);return($href&&$href.length&&[[$href[offsetMethod]().top+(!$.isWindow(self.$scrollElement.get(0))&&self.$scrollElement.scrollTop()),href]])||null;}).sort(function(a,b){return a[0]-b[0];}).each(function(){self.offsets.push(this[0]);self.targets.push(this[1]);});};ScrollSpy.prototype.process=function(){var scrollTop=this.$scrollElement.scrollTop()+this.options.offset;var scrollHeight=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight;var maxScroll=scrollHeight-this.$scrollElement.height();var offsets=this.offsets;var targets=this.targets;var activeTarget=this.activeTarget;var i;if(scrollTop>=maxScroll){return activeTarget!=(i=targets.last()[0])&&this.activate(i);}for(i=offsets.length;i--;){activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(!offsets[i+1]||scrollTop<=offsets[i+1])&&this.activate(targets[i]);}};ScrollSpy.prototype.activate=function(target){this.activeTarget=target;$(this.selector).parents(".active").removeClass("active");var selector=this.selector+'[data-target="'+target+'"],'+this.selector+'[href="'+target+'"]';var active=$(selector).parents("li").addClass("active");if(active.parent(".dropdown-menu").length){active=active.closest("li.dropdown").addClass("active");}active.trigger("activate");};var old=$.fn.scrollspy;$.fn.scrollspy=function(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.scrollspy");var options=typeof option=="object"&&option;if(!data){$this.data("bs.scrollspy",(data=new ScrollSpy(this,options)));}if(typeof option=="string"){data[option]();}});};$.fn.scrollspy.Constructor=ScrollSpy;$.fn.scrollspy.noConflict=function(){$.fn.scrollspy=old;return this;};$(window).on("load",function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this);$spy.scrollspy($spy.data());});});}(jQuery);+function($){var Tab=function(element){this.element=$(element);};Tab.prototype.show=function(){var $this=this.element;var $ul=$this.closest("ul:not(.dropdown-menu)");var selector=$this.data("target");if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"");}if($this.parent("li").hasClass("active")){return;}var previous=$ul.find(".active:last a")[0];var e=$.Event("show.bs.tab",{relatedTarget:previous});$this.trigger(e);if(e.isDefaultPrevented()){return;}var $target=$(selector);this.activate($this.parent("li"),$ul);this.activate($target,$target.parent(),function(){$this.trigger({type:"shown.bs.tab",relatedTarget:previous});});};Tab.prototype.activate=function(element,container,callback){var $active=container.find("> .active");var transition=callback&&$.support.transition&&$active.hasClass("fade");function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");element.addClass("active");if(transition){element[0].offsetWidth;element.addClass("in");}else{element.removeClass("fade");}if(element.parent(".dropdown-menu")){element.closest("li.dropdown").addClass("active");}callback&&callback();}transition?$active.one($.support.transition.end,next).emulateTransitionEnd(150):next();$active.removeClass("in");};var old=$.fn.tab;$.fn.tab=function(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.tab");if(!data){$this.data("bs.tab",(data=new Tab(this)));}if(typeof option=="string"){data[option]();}});};$.fn.tab.Constructor=Tab;$.fn.tab.noConflict=function(){$.fn.tab=old;return this;};$(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault();$(this).tab("show");});}(jQuery);+function($){var Affix=function(element,options){this.options=$.extend({},Affix.DEFAULTS,options);this.$window=$(window).on("scroll.bs.affix.data-api",$.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",$.proxy(this.checkPositionWithEventLoop,this));this.$element=$(element);this.affixed=this.unpin=null;this.checkPosition();};Affix.RESET="affix affix-top affix-bottom";Affix.DEFAULTS={offset:0};Affix.prototype.checkPositionWithEventLoop=function(){setTimeout($.proxy(this.checkPosition,this),1);};Affix.prototype.checkPosition=function(){if(!this.$element.is(":visible")){return;}var scrollHeight=$(document).height();var scrollTop=this.$window.scrollTop();var position=this.$element.offset();var offset=this.options.offset;var offsetTop=offset.top;var offsetBottom=offset.bottom;if(typeof offset!="object"){offsetBottom=offsetTop=offset;}if(typeof offsetTop=="function"){offsetTop=offset.top();}if(typeof offsetBottom=="function"){offsetBottom=offset.bottom();}var affix=this.unpin!=null&&(scrollTop+this.unpin<=position.top)?false:offsetBottom!=null&&(position.top+this.$element.height()>=scrollHeight-offsetBottom)?"bottom":offsetTop!=null&&(scrollTop<=offsetTop)?"top":false;if(this.affixed===affix){return;}if(this.unpin){this.$element.css("top","");}this.affixed=affix;this.unpin=affix=="bottom"?position.top-scrollTop:null;this.$element.removeClass(Affix.RESET).addClass("affix"+(affix?"-"+affix:""));if(affix=="bottom"){this.$element.offset({top:document.body.offsetHeight-offsetBottom-this.$element.height()});}};var old=$.fn.affix;$.fn.affix=function(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.affix");var options=typeof option=="object"&&option;if(!data){$this.data("bs.affix",(data=new Affix(this,options)));}if(typeof option=="string"){data[option]();}});};$.fn.affix.Constructor=Affix;$.fn.affix.noConflict=function(){$.fn.affix=old;return this;};$(window).on("load",function(){$('[data-spy="affix"]').each(function(){var $spy=$(this);var data=$spy.data();data.offset=data.offset||{};if(data.offsetBottom){data.offset.bottom=data.offsetBottom;}if(data.offsetTop){data.offset.top=data.offsetTop;}$spy.affix(data);});});}(jQuery);jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,f,a,h,g){return jQuery.easing[jQuery.easing.def](e,f,a,h,g);},easeInQuad:function(e,f,a,h,g){return h*(f/=g)*f+a;},easeOutQuad:function(e,f,a,h,g){return -h*(f/=g)*(f-2)+a;},easeInOutQuad:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f+a;}return -h/2*((--f)*(f-2)-1)+a;},easeInCubic:function(e,f,a,h,g){return h*(f/=g)*f*f+a;},easeOutCubic:function(e,f,a,h,g){return h*((f=f/g-1)*f*f+1)+a;},easeInOutCubic:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f+a;}return h/2*((f-=2)*f*f+2)+a;},easeInQuart:function(e,f,a,h,g){return h*(f/=g)*f*f*f+a;},easeOutQuart:function(e,f,a,h,g){return -h*((f=f/g-1)*f*f*f-1)+a;},easeInOutQuart:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f+a;}return -h/2*((f-=2)*f*f*f-2)+a;},easeInQuint:function(e,f,a,h,g){return h*(f/=g)*f*f*f*f+a;},easeOutQuint:function(e,f,a,h,g){return h*((f=f/g-1)*f*f*f*f+1)+a;},easeInOutQuint:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f*f+a;}return h/2*((f-=2)*f*f*f*f+2)+a;},easeInSine:function(e,f,a,h,g){return -h*Math.cos(f/g*(Math.PI/2))+h+a;},easeOutSine:function(e,f,a,h,g){return h*Math.sin(f/g*(Math.PI/2))+a;},easeInOutSine:function(e,f,a,h,g){return -h/2*(Math.cos(Math.PI*f/g)-1)+a;},easeInExpo:function(e,f,a,h,g){return(f==0)?a:h*Math.pow(2,10*(f/g-1))+a;},easeOutExpo:function(e,f,a,h,g){return(f==g)?a+h:h*(-Math.pow(2,-10*f/g)+1)+a;},easeInOutExpo:function(e,f,a,h,g){if(f==0){return a;}if(f==g){return a+h;}if((f/=g/2)<1){return h/2*Math.pow(2,10*(f-1))+a;}return h/2*(-Math.pow(2,-10*--f)+2)+a;},easeInCirc:function(e,f,a,h,g){return -h*(Math.sqrt(1-(f/=g)*f)-1)+a;},easeOutCirc:function(e,f,a,h,g){return h*Math.sqrt(1-(f=f/g-1)*f)+a;},easeInOutCirc:function(e,f,a,h,g){if((f/=g/2)<1){return -h/2*(Math.sqrt(1-f*f)-1)+a;}return h/2*(Math.sqrt(1-(f-=2)*f)+1)+a;},easeInElastic:function(f,h,e,l,k){var i=1.70158;var j=0;var g=l;if(h==0){return e;}if((h/=k)==1){return e+l;}if(!j){j=k*0.3;}if(g<Math.abs(l)){g=l;var i=j/4;}else{var i=j/(2*Math.PI)*Math.asin(l/g);}return -(g*Math.pow(2,10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j))+e;},easeOutElastic:function(f,h,e,l,k){var i=1.70158;var j=0;var g=l;if(h==0){return e;}if((h/=k)==1){return e+l;}if(!j){j=k*0.3;}if(g<Math.abs(l)){g=l;var i=j/4;}else{var i=j/(2*Math.PI)*Math.asin(l/g);}return g*Math.pow(2,-10*h)*Math.sin((h*k-i)*(2*Math.PI)/j)+l+e;},easeInOutElastic:function(f,h,e,l,k){var i=1.70158;var j=0;var g=l;if(h==0){return e;}if((h/=k/2)==2){return e+l;}if(!j){j=k*(0.3*1.5);}if(g<Math.abs(l)){g=l;var i=j/4;}else{var i=j/(2*Math.PI)*Math.asin(l/g);}if(h<1){return -0.5*(g*Math.pow(2,10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j))+e;}return g*Math.pow(2,-10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j)*0.5+l+e;},easeInBack:function(e,f,a,i,h,g){if(g==undefined){g=1.70158;}return i*(f/=h)*f*((g+1)*f-g)+a;},easeOutBack:function(e,f,a,i,h,g){if(g==undefined){g=1.70158;}return i*((f=f/h-1)*f*((g+1)*f+g)+1)+a;},easeInOutBack:function(e,f,a,i,h,g){if(g==undefined){g=1.70158;}if((f/=h/2)<1){return i/2*(f*f*(((g*=(1.525))+1)*f-g))+a;}return i/2*((f-=2)*f*(((g*=(1.525))+1)*f+g)+2)+a;},easeInBounce:function(e,f,a,h,g){return h-jQuery.easing.easeOutBounce(e,g-f,0,h,g)+a;},easeOutBounce:function(e,f,a,h,g){if((f/=g)<(1/2.75)){return h*(7.5625*f*f)+a;}else{if(f<(2/2.75)){return h*(7.5625*(f-=(1.5/2.75))*f+0.75)+a;}else{if(f<(2.5/2.75)){return h*(7.5625*(f-=(2.25/2.75))*f+0.9375)+a;}else{return h*(7.5625*(f-=(2.625/2.75))*f+0.984375)+a;}}}},easeInOutBounce:function(e,f,a,h,g){if(f<g/2){return jQuery.easing.easeInBounce(e,f*2,0,h,g)*0.5+a;}return jQuery.easing.easeOutBounce(e,f*2-g,0,h,g)*0.5+h*0.5+a;}});(function(root,factory){if(typeof exports==="object"){module.exports=factory(require("jquery"));}else{if(typeof define==="function"&&define.amd){define("EasyPieChart",["jquery"],factory);}else{factory(root.jQuery);}}}(this,function($){var CanvasRenderer=function(el,options){var cachedBackground;var canvas=document.createElement("canvas");if(typeof(G_vmlCanvasManager)!=="undefined"){G_vmlCanvasManager.initElement(canvas);}var ctx=canvas.getContext("2d");canvas.width=canvas.height=options.size;el.appendChild(canvas);var scaleBy=1;if(window.devicePixelRatio>1){scaleBy=window.devicePixelRatio;canvas.style.width=canvas.style.height=[options.size,"px"].join("");canvas.width=canvas.height=options.size*scaleBy;ctx.scale(scaleBy,scaleBy);}ctx.translate(options.size/2,options.size/2);ctx.rotate((-1/2+options.rotate/180)*Math.PI);var radius=(options.size-options.lineWidth)/2;if(options.scaleColor&&options.scaleLength){radius-=options.scaleLength+2;}Date.now=Date.now||function(){return +(new Date());};var drawCircle=function(color,lineWidth,percent){percent=Math.min(Math.max(0,percent||1),1);ctx.beginPath();ctx.arc(0,0,radius,0,Math.PI*2*percent,false);ctx.strokeStyle=color;ctx.lineWidth=lineWidth;ctx.stroke();};var drawScale=function(){var offset;var length;var i=24;ctx.lineWidth=1;ctx.fillStyle=options.scaleColor;ctx.save();for(var i=24;i>0;--i){if(i%6===0){length=options.scaleLength;offset=0;}else{length=options.scaleLength*0.6;offset=options.scaleLength-length;}ctx.fillRect(-options.size/2+offset,0,length,1);ctx.rotate(Math.PI/12);}ctx.restore();};var reqAnimationFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(callback){window.setTimeout(callback,1000/60);};}());var drawBackground=function(){options.scaleColor&&drawScale();options.trackColor&&drawCircle(options.trackColor,options.lineWidth);};this.clear=function(){ctx.clearRect(options.size/-2,options.size/-2,options.size,options.size);};this.draw=function(percent){if(!!options.scaleColor||!!options.trackColor){if(ctx.getImageData&&ctx.putImageData){if(!cachedBackground){drawBackground();cachedBackground=ctx.getImageData(0,0,options.size*scaleBy,options.size*scaleBy);}else{ctx.putImageData(cachedBackground,0,0);}}else{this.clear();drawBackground();}}else{this.clear();}ctx.lineCap=options.lineCap;var color;if(typeof(options.barColor)==="function"){color=options.barColor(percent);}else{color=options.barColor;}if(percent>0){drawCircle(color,options.lineWidth,percent/100);}}.bind(this);this.animate=function(from,to){var startTime=Date.now();options.onStart(from,to);var animation=function(){var process=Math.min(Date.now()-startTime,options.animate);var currentValue=options.easing(this,process,from,to-from,options.animate);this.draw(currentValue);options.onStep(from,to,currentValue);if(process>=options.animate){options.onStop(from,to);}else{reqAnimationFrame(animation);}}.bind(this);reqAnimationFrame(animation);}.bind(this);};var EasyPieChart=function(el,opts){var defaultOptions={barColor:"#ff675f",trackColor:"#e1e1e3",scaleColor:"#e1e1e3",scaleLength:0,lineCap:"round",lineWidth:15,size:152,rotate:0,animate:1000,easing:function(x,t,b,c,d){t=t/(d/2);if(t<1){return c/2*t*t+b;}return -c/2*((--t)*(t-2)-1)+b;},onStart:function(from,to){return;},onStep:function(from,to,currentValue){return;},onStop:function(from,to){return;}};if(typeof(CanvasRenderer)!=="undefined"){defaultOptions.renderer=CanvasRenderer;}else{if(typeof(SVGRenderer)!=="undefined"){defaultOptions.renderer=SVGRenderer;}else{throw new Error("Please load either the SVG- or the CanvasRenderer");}}var options={};var currentValue=0;var init=function(){this.el=el;this.options=options;for(var i in defaultOptions){if(defaultOptions.hasOwnProperty(i)){options[i]=opts&&typeof(opts[i])!=="undefined"?opts[i]:defaultOptions[i];if(typeof(options[i])==="function"){options[i]=options[i].bind(this);}}}if(typeof(options.easing)==="string"&&typeof(jQuery)!=="undefined"&&jQuery.isFunction(jQuery.easing[options.easing])){options.easing=jQuery.easing[options.easing];}else{options.easing=defaultOptions.easing;}this.renderer=new options.renderer(el,options);this.renderer.draw(currentValue);if(el.dataset&&el.dataset.percent){this.update(parseFloat(el.dataset.percent));}else{if(el.getAttribute&&el.getAttribute("data-percent")){this.update(parseFloat(el.getAttribute("data-percent")));}}}.bind(this);this.update=function(newValue){newValue=parseFloat(newValue);if(options.animate){this.renderer.animate(currentValue,newValue);}else{this.renderer.draw(newValue);}currentValue=newValue;return this;}.bind(this);init();};$.fn.easyPieChart=function(options){return this.each(function(){if(!$.data(this,"easyPieChart")){$.data(this,"easyPieChart",new EasyPieChart(this,options));}});};}));(function(jQuery,window,undefined){var jQueryevent=jQuery.event,jQueryspecial,resizeTimeout;jQueryspecial=jQueryevent.special.debouncedresize={setup:function(){jQuery(this).on("resize",jQueryspecial.handler);},teardown:function(){jQuery(this).off("resize",jQueryspecial.handler);},handler:function(event,execAsap){var context=this,args=arguments,dispatch=function(){event.type="debouncedresize";jQueryevent.dispatch.apply(context,args);};if(resizeTimeout){clearTimeout(resizeTimeout);}execAsap?dispatch():resizeTimeout=setTimeout(dispatch,jQueryspecial.threshold);},threshold:100};Array.prototype.shuffle=function(){var i=this.length,p,t;while(i--){p=Math.floor(Math.random()*i);t=this[i];this[i]=this[p];this[p]=t;}return this;};function getHiddenProp(){var prefixes=["webkit","moz","ms","o"];if("hidden" in document){return"hidden";}for(var i=0;i<prefixes.length;i++){if((prefixes[i]+"Hidden") in document){return prefixes[i]+"Hidden";}}return null;}function isHidden(){var prop=getHiddenProp();if(!prop){return false;}return document[prop];}function isEmpty(obj){return Object.keys(obj).length===0;}var jQuerywindow=jQuery(window),Modernizr=window.Modernizr;jQuery.GridRotator=function(options,element){this.jQueryel=jQuery(element);if(Modernizr.backgroundsize){var self=this;this.jQueryel.addClass("ri-grid-loading");this._init(options);}};jQuery.GridRotator.defaults={rows:2,columns:4,w1024:{rows:3,columns:8},w768:{rows:3,columns:7},w480:{rows:3,columns:5},w320:{rows:2,columns:4},w240:{rows:2,columns:3},step:"random",maxStep:3,preventClick:true,animType:"random",animSpeed:800,animEasingOut:"linear",animEasingIn:"linear",interval:3000,slideshow:true,onhover:false,nochange:[]};jQuery.GridRotator.prototype={_init:function(options){this.options=jQuery.extend(true,{},jQuery.GridRotator.defaults,options);this._config();},_config:function(){var self=this,transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};this.supportTransitions=Modernizr.csstransitions;this.supportTransforms3D=Modernizr.csstransforms3d;this.transEndEventName=transEndEventNames[Modernizr.prefixed("transition")]+".gridrotator";this.animTypes=this.supportTransforms3D?["fadeInOut","slideLeft","slideRight","slideTop","slideBottom","rotateLeft","rotateRight","rotateTop","rotateBottom","scale","rotate3d","rotateLeftScale","rotateRightScale","rotateTopScale","rotateBottomScale"]:["fadeInOut","slideLeft","slideRight","slideTop","slideBottom"];this.animType=this.options.animType;if(this.animType!=="random"&&!this.supportTransforms3D&&jQuery.inArray(this.animType,this.animTypes)===-1&&this.animType!=="showHide"){this.animType="fadeInOut";}this.animTypesTotal=this.animTypes.length;this.jQuerylist=this.jQueryel.children("ul");var loaded=0,jQueryimgs=this.jQuerylist.find("img"),count=jQueryimgs.length;jQueryimgs.each(function(){var jQueryimg=jQuery(this),src=jQueryimg.attr("src");jQuery("<img/>").load(function(){++loaded;jQueryimg.parent().css("background-image","url("+src+")");if(loaded===count){jQueryimgs.remove();self.jQueryel.removeClass("ri-grid-loading");self.jQueryitems=self.jQuerylist.children("li");self.jQueryitemsCache=self.jQueryitems.clone();self.itemsTotal=self.jQueryitems.length;self.outItems=[];self._layout(function(){self._initEvents();});self._start();}}).attr("src",src);});},_layout:function(callback){var self=this;this._setGridDim();this.jQuerylist.empty();this.jQueryitems=this.jQueryitemsCache.clone().appendTo(this.jQuerylist);var jQueryoutItems=this.jQueryitems.filter(":gt("+(this.showTotal-1)+")"),jQueryoutAItems=jQueryoutItems.children("a");this.outItems.length=0;jQueryoutAItems.each(function(i){self.outItems.push(jQuery(this));});jQueryoutItems.remove();var containerWidth=(document.defaultView)?parseInt(document.defaultView.getComputedStyle(this.jQueryel.get(0),null).width):this.jQueryel.width(),itemWidth=Math.floor(containerWidth/this.columns),gapWidth=containerWidth-(this.columns*Math.floor(itemWidth));for(var i=0;i<this.rows;++i){for(var j=0;j<this.columns;++j){var idx=this.columns*i+j,jQueryitem=this.jQueryitems.eq(idx);jQueryitem.css({width:j<Math.floor(gapWidth)?itemWidth+1:itemWidth,height:itemWidth});if(jQuery.inArray(idx,this.options.nochange)!==-1){jQueryitem.addClass("ri-nochange").data("nochange",true);}}}if(this.options.preventClick){this.jQueryitems.children().css("cursor","default").on("click.gridrotator",false);}if(callback){callback.call();}},_setGridDim:function(){var c_w=this.jQueryel.width();switch(true){case (c_w<240):this.rows=this.options.w240.rows;this.columns=this.options.w240.columns;break;case (c_w<320):this.rows=this.options.w320.rows;this.columns=this.options.w320.columns;break;case (c_w<480):this.rows=this.options.w480.rows;this.columns=this.options.w480.columns;break;case (c_w<768):this.rows=this.options.w768.rows;this.columns=this.options.w768.columns;break;case (c_w<1024):this.rows=this.options.w1024.rows;this.columns=this.options.w1024.columns;break;default:this.rows=this.options.rows;this.columns=this.options.columns;break;}this.showTotal=this.rows*this.columns;},_initEvents:function(){var self=this;jQuerywindow.on("debouncedresize.gridrotator",function(){self._layout();});var visProp=getHiddenProp();if(visProp){var evtname=visProp.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(evtname,function(){self._visChange();});}if(!Modernizr.touch&&this.options.onhover){self.jQueryitems.on("mouseenter.gridrotator",function(){var jQueryitem=jQuery(this);if(!jQueryitem.data("active")&&!jQueryitem.data("hovered")&&!jQueryitem.data("nochange")){jQueryitem.data("hovered",true);self._replace(jQueryitem);}}).on("mouseleave.gridrotator",function(){jQuery(this).data("hovered",false);});}},_visChange:function(){isHidden()?clearTimeout(this.playtimeout):this._start();},_start:function(){if(this.showTotal<this.itemsTotal&&this.options.slideshow){this._showNext();}},_getAnimType:function(){return this.animType==="random"?this.animTypes[Math.floor(Math.random()*this.animTypesTotal)]:this.animType;},_getAnimProperties:function(jQueryout){var startInProp={},startOutProp={},endInProp={},endOutProp={},animType=this._getAnimType(),speed,delay=0;switch(animType){case"showHide":speed=0;endOutProp.opacity=0;break;case"fadeInOut":endOutProp.opacity=0;break;case"slideLeft":startInProp.left=jQueryout.width();endInProp.left=0;endOutProp.left=-jQueryout.width();break;case"slideRight":startInProp.left=-jQueryout.width();endInProp.left=0;endOutProp.left=jQueryout.width();break;case"slideTop":startInProp.top=jQueryout.height();endInProp.top=0;endOutProp.top=-jQueryout.height();break;case"slideBottom":startInProp.top=-jQueryout.height();endInProp.top=0;endOutProp.top=jQueryout.height();break;case"rotateLeft":speed=this.options.animSpeed/2;startInProp.transform="rotateY(90deg)";endInProp.transform="rotateY(0deg)";delay=speed;endOutProp.transform="rotateY(-90deg)";break;case"rotateRight":speed=this.options.animSpeed/2;startInProp.transform="rotateY(-90deg)";endInProp.transform="rotateY(0deg)";delay=speed;endOutProp.transform="rotateY(90deg)";break;case"rotateTop":speed=this.options.animSpeed/2;startInProp.transform="rotateX(90deg)";endInProp.transform="rotateX(0deg)";delay=speed;endOutProp.transform="rotateX(-90deg)";break;case"rotateBottom":speed=this.options.animSpeed/2;startInProp.transform="rotateX(-90deg)";endInProp.transform="rotateX(0deg)";delay=speed;endOutProp.transform="rotateX(90deg)";break;case"scale":speed=this.options.animSpeed/2;startInProp.transform="scale(0)";startOutProp.transform="scale(1)";endInProp.transform="scale(1)";delay=speed;endOutProp.transform="scale(0)";break;case"rotateLeftScale":startOutProp.transform="scale(1)";speed=this.options.animSpeed/2;startInProp.transform="scale(0.3) rotateY(90deg)";endInProp.transform="scale(1) rotateY(0deg)";delay=speed;endOutProp.transform="scale(0.3) rotateY(-90deg)";break;case"rotateRightScale":startOutProp.transform="scale(1)";speed=this.options.animSpeed/2;startInProp.transform="scale(0.3) rotateY(-90deg)";endInProp.transform="scale(1) rotateY(0deg)";delay=speed;endOutProp.transform="scale(0.3) rotateY(90deg)";break;case"rotateTopScale":startOutProp.transform="scale(1)";speed=this.options.animSpeed/2;startInProp.transform="scale(0.3) rotateX(90deg)";endInProp.transform="scale(1) rotateX(0deg)";delay=speed;endOutProp.transform="scale(0.3) rotateX(-90deg)";break;case"rotateBottomScale":startOutProp.transform="scale(1)";speed=this.options.animSpeed/2;startInProp.transform="scale(0.3) rotateX(-90deg)";endInProp.transform="scale(1) rotateX(0deg)";delay=speed;endOutProp.transform="scale(0.3) rotateX(90deg)";break;case"rotate3d":speed=this.options.animSpeed/2;startInProp.transform="rotate3d( 1, 1, 0, 90deg )";endInProp.transform="rotate3d( 1, 1, 0, 0deg )";delay=speed;endOutProp.transform="rotate3d( 1, 1, 0, -90deg )";break;}return{startInProp:startInProp,startOutProp:startOutProp,endInProp:endInProp,endOutProp:endOutProp,delay:delay,animSpeed:speed!=undefined?speed:this.options.animSpeed};},_showNext:function(time){var self=this;clearTimeout(this.playtimeout);this.playtimeout=setTimeout(function(){var step=self.options.step,max=self.options.maxStep,min=1;if(max>self.showTotal){max=self.showTotal;}var nmbOut=step==="random"?Math.floor(Math.random()*max+min):Math.min(Math.abs(step),max),randArr=self._getRandom(nmbOut,self.showTotal);for(var i=0;i<nmbOut;++i){var jQueryout=self.jQueryitems.eq(randArr[i]);if(jQueryout.data("active")||jQueryout.data("nochange")){self._showNext(1);return false;}self._replace(jQueryout);}self._showNext();},time||Math.max(Math.abs(this.options.interval),300));},_replace:function(jQueryout){jQueryout.data("active",true);var self=this,jQueryoutA=jQueryout.children("a:last"),newElProp={width:jQueryoutA.width(),height:jQueryoutA.height()};jQueryout.data("active",true);var jQueryinA=this.outItems.shift();this.outItems.push(jQueryoutA.clone().css("transition","none"));jQueryinA.css(newElProp).prependTo(jQueryout);var animProp=this._getAnimProperties(jQueryoutA);jQueryinA.css(animProp.startInProp);jQueryoutA.css(animProp.startOutProp);this._setTransition(jQueryinA,"all",animProp.animSpeed,animProp.delay,this.options.animEasingIn);this._setTransition(jQueryoutA,"all",animProp.animSpeed,0,this.options.animEasingOut);this._applyTransition(jQueryinA,animProp.endInProp,animProp.animSpeed,function(){var jQueryel=jQuery(this),t=animProp.animSpeed===self.options.animSpeed&&isEmpty(animProp.endInProp)?animProp.animSpeed:0;setTimeout(function(){if(self.supportTransitions){jQueryel.off(self.transEndEventName);}jQueryel.next().remove();jQueryel.parent().data("active",false);},t);},animProp.animSpeed===0||isEmpty(animProp.endInProp));this._applyTransition(jQueryoutA,animProp.endOutProp,animProp.animSpeed);},_getRandom:function(cnt,limit){var randArray=[];for(var i=0;i<limit;++i){randArray.push(i);}return randArray.shuffle().slice(0,cnt);},_setTransition:function(el,prop,speed,delay,easing){setTimeout(function(){el.css("transition",prop+" "+speed+"ms "+delay+"ms "+easing);},25);},_applyTransition:function(el,styleCSS,speed,fncomplete,force){var self=this;setTimeout(function(){jQuery.fn.applyStyle=self.supportTransitions?jQuery.fn.css:jQuery.fn.animate;if(fncomplete&&self.supportTransitions){el.on(self.transEndEventName,fncomplete);if(force){fncomplete.call(el);}}fncomplete=fncomplete||function(){return false;};el.stop().applyStyle(styleCSS,jQuery.extend(true,[],{duration:speed+"ms",complete:fncomplete}));},25);}};var logError=function(message){if(window.console){window.console.error(message);}};jQuery.fn.gridrotator=function(options){var instance=jQuery.data(this,"gridrotator");if(typeof options==="string"){var args=Array.prototype.slice.call(arguments,1);this.each(function(){if(!instance){logError("cannot call methods on gridrotator prior to initialization; attempted to call method '"+options+"'");return;}if(!jQuery.isFunction(instance[options])||options.charAt(0)==="_"){logError("no such method '"+options+"' for gridrotator instance");return;}instance[options].apply(instance,args);});}else{this.each(function(){if(instance){instance._init();}else{instance=jQuery.data(this,"gridrotator",new jQuery.GridRotator(options,this));}});}return instance;};})(jQuery,window);(function(window,$,undefined){var document=window.document;var Modernizr=window.Modernizr;var capitalize=function(str){return str.charAt(0).toUpperCase()+str.slice(1);};var prefixes="Moz Webkit O Ms".split(" ");var getStyleProperty=function(propName){var style=document.documentElement.style,prefixed;if(typeof style[propName]==="string"){return propName;}propName=capitalize(propName);for(var i=0,len=prefixes.length;i<len;i++){prefixed=prefixes[i]+propName;if(typeof style[prefixed]==="string"){return prefixed;}}};var transformProp=getStyleProperty("transform"),transitionProp=getStyleProperty("transitionProperty");
/*!
   * Modernizr v1.6ish: miniModernizr for Isotope
   * http://www.modernizr.com
   *
   * Developed by:
   * - Faruk Ates  http://farukat.es/
   * - Paul Irish  http://paulirish.com/
   *
   * Copyright (c) 2009-2010
   * Dual-licensed under the BSD or MIT licenses.
   * http://www.modernizr.com/license/
   */
;var tests={csstransforms:function(){return !!transformProp;},csstransforms3d:function(){var test=!!getStyleProperty("perspective");if(test){var vendorCSSPrefixes=" -o- -moz- -ms- -webkit- -khtml- ".split(" "),mediaQuery="@media ("+vendorCSSPrefixes.join("transform-3d),(")+"modernizr)",$style=$("<style>"+mediaQuery+"{#modernizr{height:3px}}</style>").appendTo("head"),$div=$('<div id="modernizr" />').appendTo("html");test=$div.height()===6;$div.remove();$style.remove();}return test;},csstransitions:function(){return !!transitionProp;}};var testName;if(Modernizr){for(testName in tests){if(!Modernizr.hasOwnProperty(testName)){Modernizr.addTest(testName,tests[testName]);}}}else{Modernizr=window.Modernizr={_version:"1.6ish: miniModernizr for Isotope"};var classes=" ";var result;for(testName in tests){result=tests[testName]();Modernizr[testName]=result;classes+=" "+(result?"":"no-")+testName;}$("html").addClass(classes);}if(Modernizr.csstransforms){var transformFnNotations=Modernizr.csstransforms3d?{translate:function(position){return"translate3d("+position[0]+"px, "+position[1]+"px, 0) ";},scale:function(scale){return"scale3d("+scale+", "+scale+", 1) ";}}:{translate:function(position){return"translate("+position[0]+"px, "+position[1]+"px) ";},scale:function(scale){return"scale("+scale+") ";}};var setIsoTransform=function(elem,name,value){var data=$.data(elem,"isoTransform")||{},newData={},fnName,transformObj={},transformValue;newData[name]=value;$.extend(data,newData);for(fnName in data){transformValue=data[fnName];transformObj[fnName]=transformFnNotations[fnName](transformValue);}var translateFn=transformObj.translate||"",scaleFn=transformObj.scale||"",valueFns=translateFn+scaleFn;$.data(elem,"isoTransform",data);elem.style[transformProp]=valueFns;};$.cssNumber.scale=true;$.cssHooks.scale={set:function(elem,value){setIsoTransform(elem,"scale",value);},get:function(elem,computed){var transform=$.data(elem,"isoTransform");return transform&&transform.scale?transform.scale:1;}};$.fx.step.scale=function(fx){$.cssHooks.scale.set(fx.elem,fx.now+fx.unit);};$.cssNumber.translate=true;$.cssHooks.translate={set:function(elem,value){setIsoTransform(elem,"translate",value);},get:function(elem,computed){var transform=$.data(elem,"isoTransform");return transform&&transform.translate?transform.translate:[0,0];}};}var transitionEndEvent,transitionDurProp;if(Modernizr.csstransitions){transitionEndEvent={WebkitTransitionProperty:"webkitTransitionEnd",MozTransitionProperty:"transitionend",OTransitionProperty:"oTransitionEnd otransitionend",transitionProperty:"transitionend"}[transitionProp];transitionDurProp=getStyleProperty("transitionDuration");}var $event=$.event,dispatchMethod=$.event.handle?"handle":"dispatch",resizeTimeout;$event.special.smartresize={setup:function(){$(this).bind("resize",$event.special.smartresize.handler);},teardown:function(){$(this).unbind("resize",$event.special.smartresize.handler);},handler:function(event,execAsap){var context=this,args=arguments;event.type="smartresize";if(resizeTimeout){clearTimeout(resizeTimeout);}resizeTimeout=setTimeout(function(){$event[dispatchMethod].apply(context,args);},execAsap==="execAsap"?0:100);}};$.fn.smartresize=function(fn){return fn?this.bind("smartresize",fn):this.trigger("smartresize",["execAsap"]);};$.Isotope=function(options,element,callback){this.element=$(element);this._create(options);this._init(callback);};var isoContainerStyles=["width","height"];var $window=$(window);$.Isotope.settings={resizable:true,layoutMode:"masonry",containerClass:"isotope",itemClass:"isotope-item",hiddenClass:"isotope-hidden",hiddenStyle:{opacity:0,scale:0.001},visibleStyle:{opacity:1,scale:1},containerStyle:{position:"relative",overflow:"hidden"},animationEngine:"best-available",animationOptions:{queue:false,duration:800},sortBy:"original-order",sortAscending:true,resizesContainer:true,transformsEnabled:true,itemPositionDataEnabled:false};$.Isotope.prototype={_create:function(options){this.options=$.extend({},$.Isotope.settings,options);this.styleQueue=[];this.elemCount=0;var elemStyle=this.element[0].style;this.originalStyle={};var containerStyles=isoContainerStyles.slice(0);for(var prop in this.options.containerStyle){containerStyles.push(prop);}for(var i=0,len=containerStyles.length;i<len;i++){prop=containerStyles[i];this.originalStyle[prop]=elemStyle[prop]||"";}this.element.css(this.options.containerStyle);this._updateAnimationEngine();this._updateUsingTransforms();var originalOrderSorter={"original-order":function($elem,instance){instance.elemCount++;return instance.elemCount;},random:function(){return Math.random();}};this.options.getSortData=$.extend(this.options.getSortData,originalOrderSorter);this.reloadItems();this.offset={left:parseInt((this.element.css("padding-left")||0),10),top:parseInt((this.element.css("padding-top")||0),10)};var instance=this;setTimeout(function(){instance.element.addClass(instance.options.containerClass);},0);if(this.options.resizable){$window.bind("smartresize.isotope",function(){instance.resize();});}this.element.delegate("."+this.options.hiddenClass,"click",function(){return false;});},_getAtoms:function($elems){var selector=this.options.itemSelector,$atoms=selector?$elems.filter(selector).add($elems.find(selector)):$elems,atomStyle={position:"absolute"};$atoms=$atoms.filter(function(i,atom){return atom.nodeType===1;});if(this.usingTransforms){atomStyle.left=0;atomStyle.top=0;}$atoms.css(atomStyle).addClass(this.options.itemClass);this.updateSortData($atoms,true);return $atoms;},_init:function(callback){this.$filteredAtoms=this._filter(this.$allAtoms);this._sort();this.reLayout(callback);},option:function(opts){if($.isPlainObject(opts)){this.options=$.extend(true,this.options,opts);var updateOptionFn;for(var optionName in opts){updateOptionFn="_update"+capitalize(optionName);if(this[updateOptionFn]){this[updateOptionFn]();}}}},_updateAnimationEngine:function(){var animationEngine=this.options.animationEngine.toLowerCase().replace(/[ _\-]/g,"");var isUsingJQueryAnimation;switch(animationEngine){case"css":case"none":isUsingJQueryAnimation=false;break;case"jquery":isUsingJQueryAnimation=true;break;default:isUsingJQueryAnimation=!Modernizr.csstransitions;}this.isUsingJQueryAnimation=isUsingJQueryAnimation;this._updateUsingTransforms();},_updateTransformsEnabled:function(){this._updateUsingTransforms();},_updateUsingTransforms:function(){var usingTransforms=this.usingTransforms=this.options.transformsEnabled&&Modernizr.csstransforms&&Modernizr.csstransitions&&!this.isUsingJQueryAnimation;if(!usingTransforms){delete this.options.hiddenStyle.scale;delete this.options.visibleStyle.scale;}this.getPositionStyles=usingTransforms?this._translate:this._positionAbs;},_filter:function($atoms){var filter=this.options.filter===""?"*":this.options.filter;if(!filter){return $atoms;}var hiddenClass=this.options.hiddenClass,hiddenSelector="."+hiddenClass,$hiddenAtoms=$atoms.filter(hiddenSelector),$atomsToShow=$hiddenAtoms;if(filter!=="*"){$atomsToShow=$hiddenAtoms.filter(filter);var $atomsToHide=$atoms.not(hiddenSelector).not(filter).addClass(hiddenClass);this.styleQueue.push({$el:$atomsToHide,style:this.options.hiddenStyle});}this.styleQueue.push({$el:$atomsToShow,style:this.options.visibleStyle});$atomsToShow.removeClass(hiddenClass);return $atoms.filter(filter);},updateSortData:function($atoms,isIncrementingElemCount){var instance=this,getSortData=this.options.getSortData,$this,sortData;$atoms.each(function(){$this=$(this);sortData={};for(var key in getSortData){if(!isIncrementingElemCount&&key==="original-order"){sortData[key]=$.data(this,"isotope-sort-data")[key];}else{sortData[key]=getSortData[key]($this,instance);}}$.data(this,"isotope-sort-data",sortData);});},_sort:function(){var sortBy=this.options.sortBy,getSorter=this._getSorter,sortDir=this.options.sortAscending?1:-1,sortFn=function(alpha,beta){var a=getSorter(alpha,sortBy),b=getSorter(beta,sortBy);if(a===b&&sortBy!=="original-order"){a=getSorter(alpha,"original-order");b=getSorter(beta,"original-order");}return((a>b)?1:(a<b)?-1:0)*sortDir;};this.$filteredAtoms.sort(sortFn);},_getSorter:function(elem,sortBy){return $.data(elem,"isotope-sort-data")[sortBy];},_translate:function(x,y){return{translate:[x,y]};},_positionAbs:function(x,y){return{left:x,top:y};},_pushPosition:function($elem,x,y){x=Math.round(x+this.offset.left);y=Math.round(y+this.offset.top);var position=this.getPositionStyles(x,y);this.styleQueue.push({$el:$elem,style:position});if(this.options.itemPositionDataEnabled){$elem.data("isotope-item-position",{x:x,y:y});}},layout:function($elems,callback){var layoutMode=this.options.layoutMode;this["_"+layoutMode+"Layout"]($elems);if(this.options.resizesContainer){var containerStyle=this["_"+layoutMode+"GetContainerSize"]();this.styleQueue.push({$el:this.element,style:containerStyle});}this._processStyleQueue($elems,callback);this.isLaidOut=true;},_processStyleQueue:function($elems,callback){var styleFn=!this.isLaidOut?"css":(this.isUsingJQueryAnimation?"animate":"css"),animOpts=this.options.animationOptions,onLayout=this.options.onLayout,objStyleFn,processor,triggerCallbackNow,callbackFn;processor=function(i,obj){obj.$el[styleFn](obj.style,animOpts);};if(this._isInserting&&this.isUsingJQueryAnimation){processor=function(i,obj){objStyleFn=obj.$el.hasClass("no-transition")?"css":styleFn;obj.$el[objStyleFn](obj.style,animOpts);};}else{if(callback||onLayout||animOpts.complete){var isCallbackTriggered=false,callbacks=[callback,onLayout,animOpts.complete],instance=this;triggerCallbackNow=true;callbackFn=function(){if(isCallbackTriggered){return;}var hollaback;for(var i=0,len=callbacks.length;i<len;i++){hollaback=callbacks[i];if(typeof hollaback==="function"){hollaback.call(instance.element,$elems,instance);}}isCallbackTriggered=true;};if(this.isUsingJQueryAnimation&&styleFn==="animate"){animOpts.complete=callbackFn;triggerCallbackNow=false;}else{if(Modernizr.csstransitions){var i=0,firstItem=this.styleQueue[0],testElem=firstItem&&firstItem.$el,styleObj;while(!testElem||!testElem.length){styleObj=this.styleQueue[i++];if(!styleObj){return;}testElem=styleObj.$el;}var duration=parseFloat(getComputedStyle(testElem[0])[transitionDurProp]);if(duration>0){processor=function(i,obj){obj.$el[styleFn](obj.style,animOpts).one(transitionEndEvent,callbackFn);};triggerCallbackNow=false;}}}}}$.each(this.styleQueue,processor);if(triggerCallbackNow){callbackFn();}this.styleQueue=[];},resize:function(){if(this["_"+this.options.layoutMode+"ResizeChanged"]()){this.reLayout();}},reLayout:function(callback){this["_"+this.options.layoutMode+"Reset"]();this.layout(this.$filteredAtoms,callback);},addItems:function($content,callback){var $newAtoms=this._getAtoms($content);this.$allAtoms=this.$allAtoms.add($newAtoms);if(callback){callback($newAtoms);}},insert:function($content,callback){this.element.append($content);var instance=this;this.addItems($content,function($newAtoms){var $newFilteredAtoms=instance._filter($newAtoms);instance._addHideAppended($newFilteredAtoms);instance._sort();instance.reLayout();instance._revealAppended($newFilteredAtoms,callback);});},appended:function($content,callback){var instance=this;this.addItems($content,function($newAtoms){instance._addHideAppended($newAtoms);instance.layout($newAtoms);instance._revealAppended($newAtoms,callback);});},_addHideAppended:function($newAtoms){this.$filteredAtoms=this.$filteredAtoms.add($newAtoms);$newAtoms.addClass("no-transition");this._isInserting=true;this.styleQueue.push({$el:$newAtoms,style:this.options.hiddenStyle});},_revealAppended:function($newAtoms,callback){var instance=this;setTimeout(function(){$newAtoms.removeClass("no-transition");instance.styleQueue.push({$el:$newAtoms,style:instance.options.visibleStyle});instance._isInserting=false;instance._processStyleQueue($newAtoms,callback);},10);},reloadItems:function(){this.$allAtoms=this._getAtoms(this.element.children());},remove:function($content,callback){this.$allAtoms=this.$allAtoms.not($content);this.$filteredAtoms=this.$filteredAtoms.not($content);var instance=this;var removeContent=function(){$content.remove();if(callback){callback.call(instance.element);}};if($content.filter(":not(."+this.options.hiddenClass+")").length){this.styleQueue.push({$el:$content,style:this.options.hiddenStyle});this._sort();this.reLayout(removeContent);}else{removeContent();}},shuffle:function(callback){this.updateSortData(this.$allAtoms);this.options.sortBy="random";this._sort();this.reLayout(callback);},destroy:function(){var usingTransforms=this.usingTransforms;var options=this.options;this.$allAtoms.removeClass(options.hiddenClass+" "+options.itemClass).each(function(){var style=this.style;style.position="";style.top="";style.left="";style.opacity="";if(usingTransforms){style[transformProp]="";}});var elemStyle=this.element[0].style;for(var prop in this.originalStyle){elemStyle[prop]=this.originalStyle[prop];}this.element.unbind(".isotope").undelegate("."+options.hiddenClass,"click").removeClass(options.containerClass).removeData("isotope");$window.unbind(".isotope");},_getSegments:function(isRows){var namespace=this.options.layoutMode,measure=isRows?"rowHeight":"columnWidth",size=isRows?"height":"width",segmentsName=isRows?"rows":"cols",containerSize=this.element[size](),segments,segmentSize=this.options[namespace]&&this.options[namespace][measure]||this.$filteredAtoms["outer"+capitalize(size)](true)||containerSize;segments=Math.floor(containerSize/segmentSize);segments=Math.max(segments,1);this[namespace][segmentsName]=segments;this[namespace][measure]=segmentSize;},_checkIfSegmentsChanged:function(isRows){var namespace=this.options.layoutMode,segmentsName=isRows?"rows":"cols",prevSegments=this[namespace][segmentsName];this._getSegments(isRows);return(this[namespace][segmentsName]!==prevSegments);},_masonryReset:function(){this.masonry={};this._getSegments();var i=this.masonry.cols;this.masonry.colYs=[];while(i--){this.masonry.colYs.push(0);}},_masonryLayout:function($elems){var instance=this,props=instance.masonry;$elems.each(function(){var $this=$(this),colSpan=Math.ceil($this.outerWidth(true)/props.columnWidth);colSpan=Math.min(colSpan,props.cols);if(colSpan===1){instance._masonryPlaceBrick($this,props.colYs);}else{var groupCount=props.cols+1-colSpan,groupY=[],groupColY,i;for(i=0;i<groupCount;i++){groupColY=props.colYs.slice(i,i+colSpan);groupY[i]=Math.max.apply(Math,groupColY);}instance._masonryPlaceBrick($this,groupY);}});},_masonryPlaceBrick:function($brick,setY){var minimumY=Math.min.apply(Math,setY),shortCol=0;for(var i=0,len=setY.length;i<len;i++){if(setY[i]===minimumY){shortCol=i;break;}}var x=this.masonry.columnWidth*shortCol,y=minimumY;this._pushPosition($brick,x,y);var setHeight=minimumY+$brick.outerHeight(true),setSpan=this.masonry.cols+1-len;for(i=0;i<setSpan;i++){this.masonry.colYs[shortCol+i]=setHeight;}},_masonryGetContainerSize:function(){var containerHeight=Math.max.apply(Math,this.masonry.colYs);return{height:containerHeight};},_masonryResizeChanged:function(){return this._checkIfSegmentsChanged();},_fitRowsReset:function(){this.fitRows={x:0,y:0,height:0};},_fitRowsLayout:function($elems){var instance=this,containerWidth=this.element.width(),props=this.fitRows;$elems.each(function(){var $this=$(this),atomW=$this.outerWidth(true),atomH=$this.outerHeight(true);if(props.x!==0&&atomW+props.x>containerWidth){props.x=0;props.y=props.height;}instance._pushPosition($this,props.x,props.y);props.height=Math.max(props.y+atomH,props.height);props.x+=atomW;});},_fitRowsGetContainerSize:function(){return{height:this.fitRows.height};},_fitRowsResizeChanged:function(){return true;},_cellsByRowReset:function(){this.cellsByRow={index:0};this._getSegments();this._getSegments(true);},_cellsByRowLayout:function($elems){var instance=this,props=this.cellsByRow;$elems.each(function(){var $this=$(this),col=props.index%props.cols,row=Math.floor(props.index/props.cols),x=(col+0.5)*props.columnWidth-$this.outerWidth(true)/2,y=(row+0.5)*props.rowHeight-$this.outerHeight(true)/2;instance._pushPosition($this,x,y);props.index++;});},_cellsByRowGetContainerSize:function(){return{height:Math.ceil(this.$filteredAtoms.length/this.cellsByRow.cols)*this.cellsByRow.rowHeight+this.offset.top};},_cellsByRowResizeChanged:function(){return this._checkIfSegmentsChanged();},_straightDownReset:function(){this.straightDown={y:0};},_straightDownLayout:function($elems){var instance=this;$elems.each(function(i){var $this=$(this);instance._pushPosition($this,0,instance.straightDown.y);instance.straightDown.y+=$this.outerHeight(true);});},_straightDownGetContainerSize:function(){return{height:this.straightDown.y};},_straightDownResizeChanged:function(){return true;},_masonryHorizontalReset:function(){this.masonryHorizontal={};this._getSegments(true);var i=this.masonryHorizontal.rows;this.masonryHorizontal.rowXs=[];while(i--){this.masonryHorizontal.rowXs.push(0);}},_masonryHorizontalLayout:function($elems){var instance=this,props=instance.masonryHorizontal;$elems.each(function(){var $this=$(this),rowSpan=Math.ceil($this.outerHeight(true)/props.rowHeight);rowSpan=Math.min(rowSpan,props.rows);if(rowSpan===1){instance._masonryHorizontalPlaceBrick($this,props.rowXs);}else{var groupCount=props.rows+1-rowSpan,groupX=[],groupRowX,i;for(i=0;i<groupCount;i++){groupRowX=props.rowXs.slice(i,i+rowSpan);groupX[i]=Math.max.apply(Math,groupRowX);}instance._masonryHorizontalPlaceBrick($this,groupX);}});},_masonryHorizontalPlaceBrick:function($brick,setX){var minimumX=Math.min.apply(Math,setX),smallRow=0;for(var i=0,len=setX.length;i<len;i++){if(setX[i]===minimumX){smallRow=i;break;}}var x=minimumX,y=this.masonryHorizontal.rowHeight*smallRow;this._pushPosition($brick,x,y);var setWidth=minimumX+$brick.outerWidth(true),setSpan=this.masonryHorizontal.rows+1-len;for(i=0;i<setSpan;i++){this.masonryHorizontal.rowXs[smallRow+i]=setWidth;}},_masonryHorizontalGetContainerSize:function(){var containerWidth=Math.max.apply(Math,this.masonryHorizontal.rowXs);return{width:containerWidth};},_masonryHorizontalResizeChanged:function(){return this._checkIfSegmentsChanged(true);},_fitColumnsReset:function(){this.fitColumns={x:0,y:0,width:0};},_fitColumnsLayout:function($elems){var instance=this,containerHeight=this.element.height(),props=this.fitColumns;$elems.each(function(){var $this=$(this),atomW=$this.outerWidth(true),atomH=$this.outerHeight(true);if(props.y!==0&&atomH+props.y>containerHeight){props.x=props.width;props.y=0;}instance._pushPosition($this,props.x,props.y);props.width=Math.max(props.x+atomW,props.width);props.y+=atomH;});},_fitColumnsGetContainerSize:function(){return{width:this.fitColumns.width};},_fitColumnsResizeChanged:function(){return true;},_cellsByColumnReset:function(){this.cellsByColumn={index:0};this._getSegments();this._getSegments(true);},_cellsByColumnLayout:function($elems){var instance=this,props=this.cellsByColumn;$elems.each(function(){var $this=$(this),col=Math.floor(props.index/props.rows),row=props.index%props.rows,x=(col+0.5)*props.columnWidth-$this.outerWidth(true)/2,y=(row+0.5)*props.rowHeight-$this.outerHeight(true)/2;instance._pushPosition($this,x,y);props.index++;});},_cellsByColumnGetContainerSize:function(){return{width:Math.ceil(this.$filteredAtoms.length/this.cellsByColumn.rows)*this.cellsByColumn.columnWidth};},_cellsByColumnResizeChanged:function(){return this._checkIfSegmentsChanged(true);},_straightAcrossReset:function(){this.straightAcross={x:0};},_straightAcrossLayout:function($elems){var instance=this;$elems.each(function(i){var $this=$(this);instance._pushPosition($this,instance.straightAcross.x,0);instance.straightAcross.x+=$this.outerWidth(true);});},_straightAcrossGetContainerSize:function(){return{width:this.straightAcross.x};},_straightAcrossResizeChanged:function(){return true;}};
/*!
   * jQuery imagesLoaded plugin v1.1.0
   * http://github.com/desandro/imagesloaded
   *
   * MIT License. by Paul Irish et al.
   */
;$.fn.imagesLoaded=function(callback){var $this=this,$images=$this.find("img").add($this.filter("img")),len=$images.length,blank="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",loaded=[];function triggerCallback(){callback.call($this,$images);}function imgLoaded(event){var img=event.target;if(img.src!==blank&&$.inArray(img,loaded)===-1){loaded.push(img);if(--len<=0){setTimeout(triggerCallback);$images.unbind(".imagesLoaded",imgLoaded);}}}if(!len){triggerCallback();}$images.bind("load.imagesLoaded error.imagesLoaded",imgLoaded).each(function(){var src=this.src;this.src=blank;this.src=src;});return $this;};var logError=function(message){if(window.console){window.console.error(message);}};$.fn.isotope=function(options,callback){if(typeof options==="string"){var args=Array.prototype.slice.call(arguments,1);this.each(function(){var instance=$.data(this,"isotope");if(!instance){logError("cannot call methods on isotope prior to initialization; attempted to call method '"+options+"'");return;}if(!$.isFunction(instance[options])||options.charAt(0)==="_"){logError("no such method '"+options+"' for isotope instance");return;}instance[options].apply(instance,args);});}else{this.each(function(){var instance=$.data(this,"isotope");if(instance){instance.option(options);instance._init(callback);}else{$.data(this,"isotope",new $.Isotope(options,this,callback));}});}return this;};})(window,jQuery);(function($,undefined){$.widget("ui.rlightbox",{options:{animationSpeed:"fast",setPrefix:"lb",showMap:true,counterDelimiter:" / ",videoWidth:640,videoHeight:385,errorMessage:"Oh dear! Something went wrong! If the problem still appears let the pages admin know. Would you like to try again or reject the content?",againButtonLabel:"Try again",rejectButtonLabel:"Reject this content",overwriteTitle:false,keys:{next:[78,39],previous:[80,37],close:[67,27],panorama:[90,null]},loop:false},_create:function(){var _setElement,global=$.ui.rlightbox.global,self=this;global.getLightbox();_setElement=global.extractAnchor(this);if(_setElement.type!==undefined){global.addToSet(_setElement);this.element.click(function(event){global.open(self);event.preventDefault();});}},_setOption:function(key,value){}});$.extend($.ui.rlightbox,{global:{addToSet:function(setElement){var _setName=this.getSetName(setElement.self),_sets=$.ui.rlightbox.global.sets,_options=setElement.self.options,_setPrefix=_options.setPrefix,_class="."+_setPrefix+"_"+_setName,_setElementIndex=$(_class).index(setElement.element);if(!_sets[_setName]){_sets[_setName]=[];_sets[_setName].push(setElement);}else{_sets[_setName].splice(_setElementIndex,0,setElement);}},checkButtonsState:function(){var data=this.data,$lb=this.$lightbox,_currentSet=data.currentSet,_totalElements=data.totalElementsNumber,_currentElement=data.currentElementNumber,_isLoop=data.currentSetElement.self.options.loop;if(_currentSet==="single"||_totalElements===1){this.setButtonState("disabled");}else{if(_currentElement===1&&_isLoop===false){this.setButtonState("disabled",$lb.prev);this.setButtonState("default",$lb.next);}else{if(_currentElement===_totalElements&&_isLoop===false){this.setButtonState("disabled",$lb.next);this.setButtonState("default",$lb.prev);}else{this.setButtonState("default");}}}},checkMinimalSize:function(size,number){var data=this.data,_minimalLightboxSize=data.minimalLightboxSize,_minimalLightboxWidth=_minimalLightboxSize.width,_minimalLightboxHeight=_minimalLightboxSize.height;if(size==="width"){if(number<_minimalLightboxWidth){return _minimalLightboxWidth;}else{return number;}}else{if(size==="height"){if(number<_minimalLightboxHeight){return _minimalLightboxHeight;}else{return number;}}}},closeLightbox:function(){var data=this.data,$lb=this.$lightbox;if(data.ready){$lb.overlay.add($lb.root).add($lb.header).hide();$("body").css("overflow","visible");$lb.content.empty().width(20).height(20);this.hideArrow();this.setButtonState("default");this.panoramaHideIcon();data.currentElementNumber=null;data.totalElementsNumber=null;$lb.title.empty();this.panoramaHideMap();data.ready=false;}},createStructure:function(){var data=this.data;$(data.htmlLightbox).appendTo("body").after(data.htmlMap).after(data.htmlOverlay);},destroy:function(){var data=this.data,$currentElement=data.currentSetElement.element;$currentElement.unbind(".rlightbox").unbind("click").removeData("rlightbox");},extractAnchor:function(thisElement){var _result={type:undefined},$anchor=$(thisElement.element),_url=$anchor.attr("href"),_service={youtube:{urls:[/(http:\/\/www\.youtube\.com\/watch\?v=([\w-_]+))&?/],type:"youtube"},image:{urls:[/.jpg$|.png$|.gif$/],type:"image"},vimeo:{urls:[/(http:\/\/vimeo\.com\/groups\/\w+\/videos\/(\w+))&?/,/(http:\/\/vimeo\.com\/(\w+))&?/],type:"vimeo"},flash:{urls:[/.swf/],type:"flash"}};$.each(_service,function(name,content){var _found=false;$.each(content.urls,function(index,regExp){var _res=regExp.exec(_url);if(_res!==null){_result={url:_res[1],id:_res[2],type:content.type,element:$anchor,self:thisElement};if(content.type==="image"||content.type==="flash"||thisElement.options.overwriteTitle){_result.title=$anchor.attr("title");_result.url=_url;}_found=true;return false;}});if(_found){return false;}});return _result;},getAvailableScreenSize:function(){var data=this.data,_padding=data.lightboxPadding;return{width:this.getWindowSize("width")-_padding,height:this.getWindowSize("height")-data.headerHeight-_padding};},getCurrentElementNumber:function(element){var _currentNumber,data=this.data,sets=this.sets,self=this,_currentSet=sets[data.currentSet];$.each(_currentSet,function(i,v){if($(element).get(0)===v.element.get(0)){_currentNumber=i+1;return false;}});return _currentNumber;},getImageStatus:function(width,height){var _statusWidth,_statusHeight,data=this.data,_currentElement=data.currentSetElement,_windowWidth=this.getWindowSize("width"),_windowHeight=this.getWindowSize("height"),_minimalLightboxWidth=data.minimalLightboxSize.width,_minimalLightboxHeight=data.minimalLightboxSize.height,_imageWidth=_currentElement.width,_imageHeight=_currentElement.height,_lightboxPadding=data.lightboxPadding,_headerHeight=data.headerHeight;if(width<=_minimalLightboxWidth){_statusWidth=-1;}else{if(width>_minimalLightboxWidth&&width+_lightboxPadding<=_windowWidth){_statusWidth=1;}else{_statusWidth=2;}}if(height<=_minimalLightboxHeight){_statusHeight=-1;}else{if(height>_minimalLightboxHeight&&_windowHeight>=height+_lightboxPadding+_headerHeight){_statusHeight=1;}else{_statusHeight=2;}}return{statusWidth:_statusWidth,statusHeight:_statusHeight};},getLightbox:function(){var data=this.data,$lb=this.$lightbox,self=this;if(!$lb.root){this.createStructure();this.setReferences();$lb.close.add($lb.overlay).click($.proxy(this.closeLightbox,this));$lb.next.click($.proxy(this.next,this));$lb.prev.click($.proxy(this.prev,this));$lb.next.add($lb.prev).add($lb.next).add($lb.close).hover(function(){if($(this).is(":not(.ui-state-disabled)")){self.setButtonState("highlight",$(this));}},function(){if($(this).is(":not(.ui-state-disabled)")){self.setButtonState("default",$(this));}});$lb.contentContainer.mousemove($.proxy(this.showArrow,this)).mousemove($.proxy(this.checkSide,this)).mousemove($.proxy(this.setCursor,this)).click(function(){if(data.side==="left"){self.prev.apply(self);}else{if(data.side==="right"){self.next.apply(self);}}}).mousedown($.proxy(this.panoramaStart,this)).mouseup($.proxy(this.panoramaStop,this)).mouseleave(function(){self.hideArrow.apply(self);data.side="";});$lb.panoramaIcon.click($.proxy(this.panoramaToggle,this)).hover($.proxy(this.panoramaHighlight,this));$(window).bind("resize.rlightbox",$.proxy(this.liveResize,this));$(document).keyup($.proxy(this.handleKeyboard,this));}},getOptimalSize:function(size,number){var data=this.data,_minimalLightboxSize=data.minimalLightboxSize,_minimalLightboxWidth=_minimalLightboxSize.width,_minimalLightboxHeight=_minimalLightboxSize.height,_screenSize=this.getAvailableScreenSize(),_screenWidth=_screenSize.width,_screenHeight=_screenSize.height;if(size==="width"){if(number<_minimalLightboxWidth){return _minimalLightboxWidth;}else{if(number>_screenWidth){return _screenWidth;}else{return number;}}}else{if(size==="height"){if(number<_minimalLightboxHeight){return _minimalLightboxHeight;}else{if(number>_screenHeight){return _screenHeight;}else{return number;}}}}},getParam:function(param,url){var _result,_regExpString="[\\?&]"+param+"=(\\w+)",_regExp=new RegExp(_regExpString);_result=_regExp.exec(url);if(_result!==null){return _result[1];}else{return null;}},getSetName:function(thisElement){var _classNames=$(thisElement.element).attr("class"),_classPrefix=thisElement.options.setPrefix+"_",_classPattern=new RegExp(_classPrefix+"([\\w-_]+)"),_name=_classPattern.exec(_classNames);return _name?_name[1]:"single";},checkSide:function(event){var data=this.data,$lb=this.$lightbox,$container=$lb.contentContainer,_pos=event.pageX-$container.offset().left,_center=Math.round($container.width()/2),_currentElementNumber=data.currentElementNumber,_totalElementsNumber=data.totalElementsNumber;if(_pos<=_center){data.side="left";}else{if(_pos>_center){data.side="right";}}event.preventDefault();},getSizes:function(){var _statuses,_statusWidth,_statusHeight,_imageTargetWidth,_imageTargetHeight,_lightboxTargetWidth,_lightboxTargetHeight,_heightRatio,_widthRatio,$lb=this.$lightbox,data=this.data,self=this,_currentElement=data.currentSetElement,_windowWidth=this.getWindowSize("width"),_windowHeight=this.getWindowSize("height"),_minimalLightboxWidth=data.minimalLightboxSize.width,_minimalLightboxHeight=data.minimalLightboxSize.height,_imageWidth=_currentElement.width,_imageHeight=_currentElement.height,_lightboxPadding=data.lightboxPadding,_headerHeight=data.headerHeight;function _calculateSizes(w,h){_statuses=self.getImageStatus(w,h);_statusWidth=_statuses.statusWidth;_statusHeight=_statuses.statusHeight;if(((_statusWidth===1||_statusWidth===-1)&&_statusHeight!==2)&&((_statusHeight===1||_statusHeight===-1)&&_statusWidth!==2)){if(_statusWidth===1){_lightboxTargetWidth=w;}else{if(_statusWidth===-1){_lightboxTargetWidth=_minimalLightboxWidth;}}_imageTargetWidth=w;if(_statusHeight===1){_lightboxTargetHeight=h;}else{if(_statusHeight===-1){_lightboxTargetHeight=_minimalLightboxHeight;}}_imageTargetHeight=h;}else{if(_statusWidth===2||_statusHeight===2){if(_statusWidth===1||_statusWidth===-1){_lightboxTargetHeight=_windowHeight-_headerHeight-_lightboxPadding;_imageTargetHeight=_lightboxTargetHeight;_heightRatio=_lightboxTargetHeight/h;if(_statusWidth===-1){_lightboxTargetWidth=_minimalLightboxWidth;_imageTargetWidth=Math.ceil(w*_heightRatio);}else{_lightboxTargetWidth=Math.ceil(w*_heightRatio)-_lightboxPadding;_imageTargetWidth=_lightboxTargetWidth;if(_imageTargetWidth<=_minimalLightboxWidth){_calculateSizes(_imageTargetWidth,_imageTargetHeight);}}}else{if(_statusHeight===1||_statusHeight===-1){_lightboxTargetWidth=_windowWidth-_lightboxPadding;_imageTargetWidth=_lightboxTargetWidth;_widthRatio=_lightboxTargetWidth/w;if(_statusHeight===-1){_lightboxTargetHeight=_minimalLightboxHeight;_imageTargetHeight=Math.ceil(h*_widthRatio);}else{_lightboxTargetHeight=Math.ceil(h*_widthRatio)-_headerHeight-_lightboxPadding;_imageTargetHeight=_lightboxTargetHeight;if(_imageTargetHeight<=_minimalLightboxHeight){_calculateSizes(_imageTargetWidth,_imageTargetHeight);}}}else{if(w>h){_lightboxTargetWidth=_windowWidth-_lightboxPadding;_imageTargetWidth=_lightboxTargetWidth;_widthRatio=_lightboxTargetWidth/w;_lightboxTargetHeight=Math.ceil(h*_widthRatio)-_lightboxPadding-_headerHeight;_imageTargetHeight=_lightboxTargetHeight;if(_imageTargetHeight<=_minimalLightboxHeight||_lightboxTargetHeight+_lightboxPadding+_headerHeight>_windowHeight){_calculateSizes(_imageTargetWidth,_imageTargetHeight);}}else{_lightboxTargetHeight=_windowHeight-_headerHeight-_lightboxPadding;_imageTargetHeight=_lightboxTargetHeight;_heightRatio=_lightboxTargetHeight/h;_lightboxTargetWidth=Math.ceil(w*_heightRatio)-_lightboxPadding;_imageTargetWidth=_lightboxTargetWidth;if(_imageTargetWidth<=_minimalLightboxWidth||_lightboxTargetWidth>_windowWidth){_calculateSizes(_imageTargetWidth,_imageTargetHeight);}}}}}}}_calculateSizes(_imageWidth,_imageHeight);return{imageTargetWidth:_imageTargetWidth,imageTargetHeight:_imageTargetHeight,lightboxTargetWidth:_lightboxTargetWidth,lightboxTargetHeight:_lightboxTargetHeight,statusWidth:_statusWidth,statusHeight:_statusHeight};},getWindowSize:function(size){var data=this.data,_windowWidth=$(window).width(),_windowHeight=$(window).height(),_minimalLightboxSize=data.minimalLightboxSize,_lightboxPadding=data.lightboxPadding,_headerHeight=data.headerHeight,_minimalLightboxWidth=_minimalLightboxSize.width+_lightboxPadding,_minimalLightboxHeight=_minimalLightboxSize.height+_lightboxPadding+_headerHeight;if(size==="width"){if(_windowWidth<_minimalLightboxWidth){return _minimalLightboxWidth;}else{return _windowWidth;}}else{if(_windowHeight<_minimalLightboxHeight){return _minimalLightboxHeight;}else{return _windowHeight;}}},handleKeyboard:function(event){var data=this.data,_currentElement=data.currentSetElement,_options=_currentElement.self.options,_keys=_options.keys,_key=event.which;if(data.ready===false){return;}if(_key===_keys.next[0]||_key===_keys.next[1]){this.next();}else{if(_key===_keys.previous[0]||_key===_keys.previous[1]){this.prev();}else{if(_key===_keys.close[0]||_key===_keys.close[1]){this.closeLightbox();}else{if((_key===_keys.panorama[0]||_key===_keys.panorama[1])&&_currentElement.type==="image"){this.panoramaToggle(event);}}}}},hideArrow:function(){var $lb=this.$lightbox,$arrow=$lb.arrow;$arrow.hide();},liveResize:function(){var data=this.data,self=this,$lb=this.$lightbox,_elementType=data.currentSetElement.type;if(data.ready&&data.panoramaOn===false&&_elementType==="image"){this.queueResizeLightbox();this.updateTitleWidth();this.queueCenterContent();this.panoramaCheckAvailability();}else{if(data.ready&&data.panoramaOn&&_elementType==="image"){this.queueCenterLightbox();this.panoramaShrink();this.panoramaCheckAvailability();}else{if(data.ready&&_elementType!=="image"){this.queueCenterLightbox();}}}},loadContentFlash:function(url){var _width,_height,$contentWrapper,data=this.data,$lb=this.$lightbox,self=this,$content=$lb.content,_dfd=$.Deferred(),_structure=data.htmlFlash,_currentElement=data.currentSetElement,_options=_currentElement.self.options;$content.addClass("ui-lightbox-loader");function _load(){_width=self.getParam("width",url);_height=self.getParam("height",url);if(_width===null||isNaN(_width)){_width=_options.videoWidth;}if(_height===null||isNaN(_height)){_height=_options.videoHeight;}_currentElement.width=_width;_currentElement.height=_height;_structure=self.replaceHtmlPatterns(_structure,{width:_width,height:_height,url:url});$contentWrapper=$("<div></div>");$contentWrapper.css({display:"none",width:_width,height:_height});$content.removeClass("ui-lightbox-loader").empty().append(_structure).children().wrap($contentWrapper);_dfd.resolve();}setTimeout(_load,1000);return _dfd.promise();},loadContentImage:function(url){var $lb=this.$lightbox,data=this.data,self=this,_currentElement=data.currentSetElement,_dfd=$.Deferred(),$newImage=$("<img />");$lb.content.addClass("ui-lightbox-loader");$newImage.attr("src",url).bind("load",function(){$(this).unbind("load");_currentElement.width=this.width;_currentElement.height=this.height;$lb.content.removeClass("ui-lightbox-loader").empty().append(this).children().hide();_dfd.resolve();}).error(function(){$lb.content.removeClass("ui-lightbox-loader");self.showErrorMessage();_dfd.resolve();}).each(function(){if(this.complete||this.complete===undefined){var src=this.src;this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";this.src=src;}});return _dfd.promise();},loadContentVimeo:function(url){var _width,_height,data=this.data,$lb=this.$lightbox,self=this,_dfd=$.Deferred(),_apiEnd=data.providers.vimeo,_currentElement=data.currentSetElement,_options=_currentElement.self.options,_minimalLightboxSize=data.minimalLightboxSize;$lb.content.addClass("ui-lightbox-loader");$.ajax({url:_apiEnd,data:{url:url,maxwidth:_options.videoWidth,maxheight:_options.videoHeight},dataType:"jsonp",timeout:5000}).success(function(data){$lb.content.removeClass("ui-lightbox-loader").empty().append(data.html).children().wrap("<div style='display: none'></div>").end().find("div:first").width(data.width).height(data.height);if(_options.overwriteTitle===false){_currentElement.title=data.title;}_currentElement.width=data.width;_currentElement.height=data.height;_dfd.resolve();}).error(function(){$lb.content.removeClass("ui-lightbox-loader");self.showErrorMessage();_dfd.resolve();});return _dfd.promise();},loadContentYoutube:function(url){var $contentWrapper,data=this.data,$lb=this.$lightbox,$content=$lb.content,self=this,_dfd=$.Deferred(),_apiEnd=data.providers.youtube,_currentElement=data.currentSetElement,_options=_currentElement.self.options,_minimalLightboxSize=data.minimalLightboxSize,_width=_options.videoWidth,_height=_options.videoHeight,_structure=data.htmlYoutube;function _showError(){$lb.content.removeClass("ui-lightbox-loader");self.showErrorMessage();_dfd.resolve();}$lb.content.addClass("ui-lightbox-loader");$.ajax({url:_apiEnd+_currentElement.id+"?callback=?",data:{v:2,alt:"jsonc",prettyprint:true},dataType:"jsonp",timeout:5000}).success(function(json){if(json.error){_showError();return;}_structure=self.replaceHtmlPatterns(_structure,{width:_width,height:_height,url:_currentElement.id});$contentWrapper=$("<div></div>");$contentWrapper.css({display:"none",width:_width,height:_height});$content.removeClass("ui-lightbox-loader").empty().append(_structure).children().wrap($contentWrapper);if(_options.overwriteTitle===false){_currentElement.title=json.data.title;}_currentElement.width=_width;_currentElement.height=_height;_dfd.resolve();}).error(function(){_showError();});return _dfd.promise();},navigationGoToElement:function(number){var data=this.data,sets=this.sets,$lb=this.$lightbox,_currentSet=data.currentSet;data.currentElementNumber=number;data.currentSetElement=sets[_currentSet][number-1];this.setNextQueue();$lb.queueContainer.next.dequeue("lightboxNext");},next:function(){var data=this.data,sets=this.sets,$lb=this.$lightbox,_isReady=data.ready,_isPanoramaOn=data.panoramaOn,_set=data.currentSet,_currentElementNumber=data.currentElementNumber,_totalElementsNumber=data.totalElementsNumber,_options=data.currentSetElement.self.options,_isLoop=_options.loop,_play=true;if(_isReady&&_set!=="single"&&_isPanoramaOn===false){if(_currentElementNumber+1<=_totalElementsNumber){data.currentElementNumber=_currentElementNumber=_currentElementNumber+1;}else{if(_currentElementNumber+1>_totalElementsNumber&&_isLoop){data.currentElementNumber=_currentElementNumber=1;}else{_play=false;}}if(_play){data.currentSetElement=sets[_set][_currentElementNumber-1];this.setNextQueue();$lb.queueContainer.next.dequeue("lightboxNext");}}},open:function(thisElement){var data=this.data,sets=this.sets,$lb=this.$lightbox,_jqElement=thisElement.element,_currentSet=this.getSetName(thisElement),_currentUrl=$(_jqElement).attr("href");data.currentSet=_currentSet;data.totalElementsNumber=sets[_currentSet].length;data.currentElementNumber=this.getCurrentElementNumber(_jqElement);data.currentSetElement=sets[_currentSet][data.currentElementNumber-1];this.setOpenQueue();this.setNextQueue();this.checkButtonsState();$lb.queueContainer.open.dequeue("lightboxOpen");},panoramaCenterContent:function(){var _left,_top,data=this.data,$lb=this.$lightbox,_currentElement=data.currentSetElement,_screenSize=this.getAvailableScreenSize(),_screenWidth=_screenSize.width,_screenHeight=_screenSize.height,_imageWidth=_currentElement.width,_imageHeight=_currentElement.height,$content=$lb.content,$img=$content.find("img");if(_screenWidth<_imageWidth){_left=0;}else{_left=$content.width()/2-$img.width()/2;}if(_screenHeight<_imageHeight){_top=0;}else{_top=$content.height()/2-$img.height()/2;}$img.css({top:_top,left:_left});},panoramaCheckAvailability:function(){var data=this.data,_currentElement=data.currentSetElement,_originalImageWidth=_currentElement.width,_originalImageHeight=_currentElement.height,_currentImageWidth=_currentElement.currentWidth,_currentImageHeight=_currentElement.currentHeight;if(_currentImageWidth<_originalImageWidth||_currentImageHeight<_originalImageHeight){this.panoramaShowIcon("expand");data.enablePanorama=true;}else{data.enablePanorama=false;this.panoramaHideIcon();}},panoramaExpand:function(event){var data=this.data,$lb=this.$lightbox,_currentElement=data.currentSetElement,_options=_currentElement.self.options;data.panoramaOn=true;if(event.type==="click"){this.panoramaShowIcon("shrink","-hover");}else{this.panoramaShowIcon("shrink");}$lb.content.css("overflow","hidden");$lb.content.find("img").width(_currentElement.width).height(_currentElement.height);this.panoramaSetContentSize();this.panoramaCenterContent();this.queueCenterLightbox();this.updateTitleWidth();if(_options.showMap){this.panoramaShowMap();}this.hideArrow();this.setCursor();},panoramaHideIcon:function(){var data=this.data,$lb=this.$lightbox;$lb.panoramaIcon.hide().removeClass("ui-lightbox-panorama-icon-expand ui-lightbox-panorama-icon-shrink");data.panoramaOn=false;},panoramaHideMap:function(){var $lb=this.$lightbox;$lb.map.hide();$lb.viewport.css({left:-1,top:-1});},panoramaHighlight:function(){var _suffixPosition,$lb=this.$lightbox,_suffix="-hover";$lb.panoramaIcon.attr("class",function(index,oldValue){_suffixPosition=oldValue.indexOf(_suffix);if(_suffixPosition!==-1){return oldValue.slice(0,_suffixPosition);}else{return oldValue+_suffix;}});},panoramaSetContentSize:function(){var _contentWidth,_contentHeight,data=this.data,$lb=this.$lightbox,_currentElement=data.currentSetElement,_minLightboxSize=data.minimalLightboxSize,_minLightboxWidth=_minLightboxSize.width,_minLightboxHeight=_minLightboxSize.height,_screenSize=this.getAvailableScreenSize(),_screenWidth=_screenSize.width,_screenHeight=_screenSize.height,_imageWidth=_currentElement.width,_imageHeight=_currentElement.height;if(_imageWidth>_screenWidth){_contentWidth=_screenWidth;}else{if(_imageWidth<=_minLightboxWidth){_contentWidth=_minLightboxWidth;}else{_contentWidth=_imageWidth;}}if(_imageHeight>_screenHeight){_contentHeight=_screenHeight;}else{if(_imageHeight<=_minLightboxHeight){_contentHeight=_minLightboxHeight;}else{_contentHeight=_imageHeight;}}$lb.content.width(_contentWidth).height(_contentHeight);},panoramaShowIcon:function(icon,state){var $lb=this.$lightbox,_state=state||"",_newClass="ui-lightbox-panorama-icon-"+icon+_state;$lb.panoramaIcon.show().removeClass().addClass(_newClass);},panoramaShowMap:function(){var _mapViewportWidth,_mapViewportHeight,_mapViewportWidthRatio,_mapViewportHeightRatio,_contentViewportWidth,_contentViewportHeight,data=this.data,_minimalLightboxSize=data.minimalLightboxSize,$lb=this.$lightbox,$content=$lb.content,$image=$content.find("img"),_imageWidth=$image.width(),_imageHeight=$image.height(),_currentElement=data.currentSetElement,_mapSize=data.mapSize;_mapViewportWidthRatio=_mapSize.width/_currentElement.width;_mapViewportHeightRatio=_mapSize.height/_currentElement.height;if(_imageWidth<_minimalLightboxSize.width){_contentViewportWidth=_imageWidth;}else{_contentViewportWidth=$content.width();}if(_imageHeight<_minimalLightboxSize.height){_contentViewportHeight=_imageHeight;}else{_contentViewportHeight=$content.height();}_mapViewportWidth=Math.ceil(_contentViewportWidth*_mapViewportWidthRatio);_mapViewportHeight=Math.ceil(_contentViewportHeight*_mapViewportHeightRatio);$lb.viewport.width(_mapViewportWidth).height(_mapViewportHeight);$lb.map.show();data.viewportRatio={width:_mapViewportWidthRatio,height:_mapViewportHeightRatio};},panoramaShrink:function(event){var data=this.data,$lb=this.$lightbox;data.panoramaOn=false;if(event&&event.type==="click"){this.panoramaShowIcon("expand","-hover");}else{this.panoramaShowIcon("expand");}this.queueResizeLightbox();this.queueCenterContent();$lb.content.css("overflow","visible");this.updateTitleWidth();this.panoramaHideMap();this.setCursor();},panoramaStart:function(event){var data=this.data,$lb=this.$lightbox;data.panoramaPosition={xStart:event.pageX,yStart:event.pageY};event.preventDefault();},panoramaStop:function(event){var data=this.data,$lb=this.$lightbox,_distX=(event.pageX-data.panoramaPosition.xStart)*-1,_distY=(event.pageY-data.panoramaPosition.yStart)*-1,$content=$lb.content,_viewportRatio=data.viewportRatio;if(data.panoramaOn){$content.scrollLeft($content.scrollLeft()+_distX).scrollTop($content.scrollTop()+_distY);$lb.viewport.css({left:$content.scrollLeft()*_viewportRatio.width-1,top:$content.scrollTop()*_viewportRatio.height-1});}event.stopPropagation();},panoramaToggle:function(event){var data=this.data,_panoramaOn=data.panoramaOn,_isPanoramaEnabled=data.enablePanorama;if(_isPanoramaEnabled&&_panoramaOn===false){this.panoramaExpand(event);}else{if(_isPanoramaEnabled&&_panoramaOn){this.panoramaShrink(event);}}},prev:function(){var data=this.data,sets=this.sets,$lb=this.$lightbox,_isReady=data.ready,_isPanoramaOn=data.panoramaOn,_set=data.currentSet,_currentElementNumber=data.currentElementNumber,_totalElementsNumber=data.totalElementsNumber,_options=data.currentSetElement.self.options,_isLoop=_options.loop,_play=true;if(_isReady&&_set!=="single"&&_isPanoramaOn===false){if(_currentElementNumber-1>=1){data.currentElementNumber=_currentElementNumber=_currentElementNumber-1;}else{if(_currentElementNumber-1<1&&_isLoop){data.currentElementNumber=_currentElementNumber=_totalElementsNumber;}else{_play=false;}}if(_play){data.currentSetElement=sets[_set][_currentElementNumber-1];this.setNextQueue();$lb.queueContainer.next.dequeue("lightboxNext");}}},removeSetElement:function(number){var data=this.data,sets=this.sets,_currentSet=data.currentSet,_total=data.totalElementsNumber;sets[_currentSet].splice(number-1,1);if(_total===1||_currentSet==="single"){this.closeLightbox();this.destroy();}else{this.destroy();data.totalElementsNumber=sets[_currentSet].length;if(number===_total){this.navigationGoToElement(number-1);}else{this.navigationGoToElement(number);}}},replaceHtmlPatterns:function(htmlString,patterns){$.each(patterns,function(key,value){var _regExp=new RegExp("{"+key+"}","g");htmlString=htmlString.replace(_regExp,value);});return htmlString;},setButtonState:function(state,jqElement){var $lb=this.$lightbox,jqElem=jqElement||$lb.controlButtons;switch(state){case"default":jqElem.removeClass("ui-state-highlight ui-state-disabled");break;case"highlight":jqElem.addClass("ui-state-highlight");break;case"disabled":jqElem.addClass("ui-state-disabled");break;}},setCursor:function(event){var data=this.data,$lb=this.$lightbox,$contentContainer=$lb.contentContainer,_currentSet=data.currentSet,_currentSetElement=data.currentSetElement,_setElementType=data.currentSetElement.type,_totalElements=data.totalElementsNumber,_currentElement=data.currentElementNumber,_side=data.side,_panoramaEnabled=data.panoramaOn,_isError=data.showErrorMessage,_options=_currentSetElement.self.options,_isLoop=_options.loop;if(data.ready){if((_currentSet==="single"||_totalElements===1||_currentElement===1&&_side==="left"||_currentElement===_totalElements&&_side==="right")&&_panoramaEnabled===false&&(_setElementType==="image"||(_setElementType!=="image"&&_isError))){if(_isLoop===false){$contentContainer.css("cursor","default");}else{$contentContainer.css("cursor","pointer");}}else{if(_panoramaEnabled){$contentContainer.css("cursor","move");}else{if(_setElementType==="image"||(_setElementType!=="image"&&_isError)){$contentContainer.css("cursor","pointer");}else{$contentContainer.css("cursor","auto");}}}}else{$contentContainer.css("cursor","default");}if(event){event.preventDefault();}},setNextQueue:function(){var $lb=this.$lightbox,queueList=[$.proxy(this.queueSlideUpHeader,this),$.proxy(this.queueHideContent,this),$.proxy(this.queueLoadContent,this),$.proxy(this.queueResizeLightbox,this),$.proxy(this.queueCenterContent,this),$.proxy(this.queueShowContent,this),$.proxy(this.queueSlideDownHeader,this)];$lb.queueContainer.next.queue("lightboxNext",queueList);},setOpenQueue:function(){var $lb=this.$lightbox,queueList=[$.proxy(this.queueShowOverlay,this),$.proxy(this.queueCenterLightbox,this),$.proxy(this.queueLoadContent,this),$.proxy(this.queueResizeLightbox,this),$.proxy(this.queueCenterContent,this),$.proxy(this.queueShowContent,this),$.proxy(this.queueSlideDownHeader,this)];$lb.queueContainer.open.queue("lightboxOpen",queueList);},setReferences:function(){var $lb=this.$lightbox;$lb.root=$("#ui-lightbox");$lb.panoramaIcon=$lb.root.find("#ui-lightbox-panorama-icon");$lb.contentContainer=$lb.root.find("#ui-lightbox-content-container");$lb.content=$lb.contentContainer.find("#ui-lightbox-content");$lb.arrow=$lb.contentContainer.find("#ui-lightbox-arrow");$lb.header=$lb.root.find("#ui-lightbox-bottombar");$lb.headerWrapper=$lb.header.find("#ui-lightbox-title-wrapper");$lb.overlay=$("#ui-lightbox-overlay");$lb.next=$lb.root.find("#ui-lightbox-button-next");$lb.prev=$lb.root.find("#ui-lightbox-button-prev");$lb.controlButtons=$lb.next.add($lb.prev);$lb.close=$lb.root.find("#ui-lightbox-button-close");$lb.counter=$lb.root.find("#ui-lightbox-counter");$lb.title=$lb.root.find("#ui-lightbox-title");$lb.map=$("#ui-lightbox-map");$lb.viewport=$lb.map.children().eq(0);$lb.queueContainer={open:$({}),next:$({})};},showArrow:function(event){var data=this.data,$lb=this.$lightbox,$arrow=$lb.arrow,_isError=data.showErrorMessage,_side=data.side,_currentElement=data.currentElementNumber,_totalElements=data.totalElementsNumber,_isLoop=data.currentSetElement.self.options.loop;if(data.ready&&data.currentSet!=="single"&&(data.currentSetElement.type==="image"||_isError)&&data.panoramaOn===false){if(_side==="left"&&(_currentElement>1||_isLoop)){$arrow.show().removeClass("ui-lightbox-arrow-next ui-corner-left").addClass("ui-lightbox-arrow-prev ui-corner-right").find("span").removeClass("ui-icon-carat-1-e").addClass("ui-icon-carat-1-w");}else{if(_side==="right"&&(_currentElement<_totalElements||_isLoop)){$arrow.show().removeClass("ui-lightbox-arrow-prev ui-corner-right").addClass("ui-lightbox-arrow-next ui-corner-left").find("span").removeClass("ui-icon-carat-1-w").addClass("ui-icon-carat-1-e");}else{this.hideArrow();}}}if(event){event.preventDefault();}},showErrorMessage:function(){var $again,$reject,$structure,data=this.data,$lb=this.$lightbox,self=this,_currentElement=data.currentSetElement,_options=_currentElement.self.options,_currentElementNumber=data.currentElementNumber,_errorMessage=_options.errorMessage,_againLabel=_options.againButtonLabel,_rejectLabel=_options.rejectButtonLabel,_structure=data.htmlErrorScreen,_errorScreenSize=data.errorScreenSize,_errorScreenWidth=_errorScreenSize.width,_errorScreenHeight=_errorScreenSize.height;_structure=self.replaceHtmlPatterns(_structure,{message:_errorMessage,labelAgain:_againLabel,labelReject:_rejectLabel});$structure=$(_structure);$again=$structure.find("#ui-lightbox-error-footer-again");$reject=$structure.find("#ui-lightbox-error-footer-reject");$again.click(function(){self.navigationGoToElement(_currentElementNumber);}).hover(function(){$(this).toggleClass("ui-state-hover");});$reject.click(function(){self.removeSetElement(_currentElementNumber);}).hover(function(){$(this).toggleClass("ui-state-hover");});$lb.content.empty().append($structure).find("#ui-lightbox-error").width(_errorScreenWidth).height(_errorScreenHeight).end().children().hide();data.showErrorMessage=true;},updateCounter:function(){var _current,_total,_newCounter,data=this.data,$lb=this.$lightbox,_currentElement=data.currentSetElement,_options=_currentElement.self.options,_currentSet=data.currentSet;if(_currentSet!=="single"){_current=data.currentElementNumber;_total=data.totalElementsNumber;}else{_current=1;_total=1;}_newCounter=_current+_options.counterDelimiter+_total;$lb.counter.text(_newCounter);},updateTitle:function(){var data=this.data,$lb=this.$lightbox,_currentElement=data.currentSetElement;if(_currentElement.title!==""){$lb.title.empty().append(_currentElement.title);}else{$lb.title.append("&nbsp;");}},updateTitleWidth:function(){var $lb=this.$lightbox;$lb.header.width($lb.content.width()-12);},queueHideContent:function(next){var data=this.data,$lb=this.$lightbox,_currentElement=data.currentSetElement,_options=_currentElement.self.options;$lb.content.children().fadeOut(_options.animationSpeed,function(){$(this).remove();next();});$lb.panoramaIcon.hide().removeClass("ui-lightbox-panorama-icon-expand ui-lightbox-panorama-icon-shrink");data.panoramaOn=false;this.panoramaHideMap();},queueShowOverlay:function(next){var data=this.data,$lb=this.$lightbox,_currentElement=data.currentSetElement.self;data.ready=false;this.setCursor();$lb.overlay.fadeIn(_currentElement.options.animationSpeed,next);},queueCenterLightbox:function(next){var $lb=this.$lightbox,$root=$lb.root,_screenWidth=this.getWindowSize("width"),_screenHeight=this.getWindowSize("height"),_lbWidth=$root.outerWidth(),_lbHeight=$root.outerHeight();$root.css({left:Math.round((_screenWidth-_lbWidth)/2)+"px",top:Math.round((_screenHeight-_lbHeight)/2)+"px"}).show(0,next);},queueLoadContent:function(next){var _loadContentMethod,data=this.data,_currentSetElement=data.currentSetElement;data.showErrorMessage=false;switch(_currentSetElement.type){case"image":_loadContentMethod="loadContentImage";break;case"youtube":_loadContentMethod="loadContentYoutube";break;case"vimeo":_loadContentMethod="loadContentVimeo";break;case"flash":_loadContentMethod="loadContentFlash";}$.when(this[_loadContentMethod](_currentSetElement.url)).then(function(){next();});},queueResizeLightbox:function(next){var _speed,_animate,_sizes,_imageTargetWidth,_imageTargetHeight,_lightboxTargetWidth,_lightboxTargetHeight,_img,data=this.data,$lb=this.$lightbox,_padding=data.lightboxPadding,_headerHeight=data.headerHeight,_currentElement=data.currentSetElement,_options=_currentElement.self.options,_isError=data.showErrorMessage,_errorScreenSize=data.errorScreenSize,_errorScreenWidth=_errorScreenSize.width,_errorScreenHeight=_errorScreenSize.height,_minimalLightboxSize=data.minimalLightboxSize,_minimalLightboxWidth=_minimalLightboxSize.width,_minimalLightboxHeight=_minimalLightboxSize.height;_speed=_options.animationSpeed;if(_currentElement.type==="image"&&_isError===false){_sizes=this.getSizes();_imageTargetWidth=_sizes.imageTargetWidth;_imageTargetHeight=_sizes.imageTargetHeight;_lightboxTargetWidth=_sizes.lightboxTargetWidth;_lightboxTargetHeight=_sizes.lightboxTargetHeight;_img=$lb.content.find("img");_currentElement.currentWidth=_imageTargetWidth;_currentElement.currentHeight=_imageTargetHeight;_img.width(_imageTargetWidth).height(_imageTargetHeight);if($.isFunction(next)){_speed=_options.animationSpeed;}else{_speed=0;}}else{if((_currentElement.type==="youtube"||_currentElement.type==="vimeo")&&_isError===false){_lightboxTargetWidth=this.checkMinimalSize("width",_currentElement.width);_lightboxTargetHeight=this.checkMinimalSize("height",_currentElement.height);}else{if(_currentElement.type==="flash"&&_isError===false){_lightboxTargetWidth=this.getOptimalSize("width",_currentElement.width);_lightboxTargetHeight=this.getOptimalSize("height",_currentElement.height);}else{if(_isError){_speed=0;_lightboxTargetWidth=_errorScreenWidth;_lightboxTargetHeight=_errorScreenHeight;}}}}$lb.root.find("#ui-lightbox-content").animate({width:_lightboxTargetWidth},_speed).animate({height:_lightboxTargetHeight},_speed).end().animate({left:(this.getWindowSize("width")-_lightboxTargetWidth-_padding)/2},_speed).animate({top:(this.getWindowSize("height")-_lightboxTargetHeight-_padding-_headerHeight)/2},_speed,next);},queueCenterContent:function(next){var _content,$lb=this.$lightbox,$contentContainer=$lb.content,$content=$contentContainer.children();$contentContainer.children().css({top:$contentContainer.height()/2-$content.outerHeight()/2,left:$contentContainer.width()/2-$content.outerWidth()/2});if(next){next();}},queueShowContent:function(next){var data=this.data,$lb=this.$lightbox,self=this,_currentElement=data.currentSetElement,_options=_currentElement.self.options,_isError=data.showErrorMessage;$lb.content.children().fadeIn(_options.animationSpeed,function(){if(_currentElement.type==="image"&&_isError===false){self.panoramaCheckAvailability();}next();});},queueSlideDownHeader:function(next){var data=this.data,$lb=this.$lightbox,_options=data.currentSetElement.self.options;$lb.header.slideDown(_options.animationSpeed,next);this.updateCounter();this.updateTitleWidth();this.updateTitle();this.checkButtonsState();data.ready=true;this.setCursor();this.showArrow();},queueSlideUpHeader:function(next){var data=this.data,$lb=this.$lightbox,_currentElement=data.currentSetElement,_options=_currentElement.self.options;data.ready=false;this.hideArrow();this.setCursor();$lb.header.slideUp(_options.animationSpeed,next);},$lightbox:{},sets:{},data:{minimalLightboxSize:{width:300,height:300},lightboxPadding:12,headerHeight:57,ready:false,panoramaOn:false,mapSize:{width:150,height:100},providers:{vimeo:"http://www.vimeo.com/api/oembed.json?callback=?",youtube:"http://gdata.youtube.com/feeds/api/videos/"},showErrorMessage:false,currentSetElement:{},enablePanorama:false,errorScreenSize:{width:500,height:500},htmlFlash:"<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000' width='{width}' height='{height}'><param name='movie' value='{url}' /><!--[if !IE]>--><object type='application/x-shockwave-flash' data='{url}' width='{width}' height='{height}'><!--<![endif]--><!--[if !IE]>--></object><!--<![endif]--></object>",htmlErrorScreen:"<div id='ui-lightbox-error'><div id='ui-lightbox-error-message' class='ui-lightbox-error-icon-sign'>{message}</div><div id='ui-lightbox-error-footer'><button aria-disabled='false' role='button' id='ui-lightbox-error-footer-again' class='ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary'><span class='ui-button-icon-primary ui-icon ui-icon-refresh'></span><span class='ui-button-text'>{labelAgain}</span></button><button aria-disabled='false' role='button' id='ui-lightbox-error-footer-reject' class='ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary'><span class='ui-button-icon-primary ui-icon ui-icon-trash'></span><span class='ui-button-text'>{labelReject}</span></button></div></div>",htmlYoutube:"<iframe class='youtube-player' type='text/html' width='{width}' height='{height}' src='http://www.youtube.com/embed/{url}' frameborder='0'></iframe>",htmlLightbox:"<div id='ui-lightbox' class='ui-widget ui-widget-content ui-corner-all' style='display: none'><div id='ui-lightbox-content-container'><div id='ui-lightbox-content' class='ui-widget-content'></div><a id='ui-lightbox-arrow' class='ui-widget-header' style='display: none'><span class='ui-icon'>go</span></a></div><div id='ui-lightbox-bottombar' class='ui-widget-header ui-corner-all' style='display: none'><p id='ui-lightbox-title-wrapper'><span id='ui-lightbox-title'></span></p><p id='ui-lightbox-bottombar-bottom'><a id='ui-lightbox-button-prev' class='ui-lightbox-button'><span class='ui-icon ui-icon-circle-arrow-w'>prev</span></a><span id='ui-lightbox-counter'></span><a id='ui-lightbox-button-next' class='ui-lightbox-button'><span class='ui-icon ui-icon-circle-arrow-e'>next</span></a></p><a id='ui-lightbox-button-close' class='ui-lightbox-button'><span class='ui-icon ui-icon-closethick'>close</span></a><div id='ui-lightbox-panorama-icon' style='display: none'></div></div></div>",htmlMap:"<div id='ui-lightbox-map' style='display: none'><div id='ui-lightbox-map-viewport'></div></div>",htmlOverlay:"<div id='ui-lightbox-overlay' class='ui-widget-overlay' style='display: none'></div>"}}});})(jQuery);(function($){if("placeholder" in document.createElement("input")){return;}$(document).ready(function(){$(":input[placeholder]").not(":password").each(function(){setupPlaceholder($(this));});$(":password[placeholder]").each(function(){setupPasswords($(this));});$("form").submit(function(e){clearPlaceholdersBeforeSubmit($(this));});});function setupPlaceholder(input){var placeholderText=input.attr("placeholder");setPlaceholderOrFlagChanged(input,placeholderText);input.focus(function(e){if(input.data("changed")===true){return;}if(input.val()===placeholderText){input.val("");}}).blur(function(e){if(input.val()===""){input.val(placeholderText);}}).change(function(e){input.data("changed",input.val()!=="");});}function setPlaceholderOrFlagChanged(input,text){(input.val()==="")?input.val(text):input.data("changed",true);}function setupPasswords(input){var passwordPlaceholder=createPasswordPlaceholder(input);input.after(passwordPlaceholder);(input.val()==="")?input.hide():passwordPlaceholder.hide();$(input).blur(function(e){if(input.val()!==""){return;}input.hide();passwordPlaceholder.show();});$(passwordPlaceholder).focus(function(e){input.show().focus();passwordPlaceholder.hide();});}function createPasswordPlaceholder(input){return $("<input>").attr({placeholder:input.attr("placeholder"),value:input.attr("placeholder"),id:input.attr("id"),readonly:true}).addClass(input.attr("class"));}function clearPlaceholdersBeforeSubmit(form){form.find(":input[placeholder]").each(function(){if($(this).data("changed")===true){return;}if($(this).val()===$(this).attr("placeholder")){$(this).val("");}});}})(jQuery);
/*!
 * jQuery UI Widget 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(b,j){if(b.cleanData){var k=b.cleanData;b.cleanData=function(a){for(var c=0,d;(d=a[c])!=null;c++){try{b(d).triggerHandler("remove");}catch(e){}}k(a);};}else{var l=b.fn.remove;b.fn.remove=function(a,c){return this.each(function(){if(!c){if(!a||b.filter(a,[this]).length){b("*",this).add([this]).each(function(){try{b(this).triggerHandler("remove");}catch(d){}});}}return l.call(b(this),a,c);});};}b.widget=function(a,c,d){var e=a.split(".")[0],f;a=a.split(".")[1];f=e+"-"+a;if(!d){d=c;c=b.Widget;}b.expr[":"][f]=function(h){return !!b.data(h,a);};b[e]=b[e]||{};b[e][a]=function(h,g){arguments.length&&this._createWidget(h,g);};c=new c;c.options=b.extend(true,{},c.options);b[e][a].prototype=b.extend(true,c,{namespace:e,widgetName:a,widgetEventPrefix:b[e][a].prototype.widgetEventPrefix||a,widgetBaseClass:f},d);b.widget.bridge(a,b[e][a]);};b.widget.bridge=function(a,c){b.fn[a]=function(d){var e=typeof d==="string",f=Array.prototype.slice.call(arguments,1),h=this;d=!e&&f.length?b.extend.apply(null,[true,d].concat(f)):d;if(e&&d.charAt(0)==="_"){return h;}e?this.each(function(){var g=b.data(this,a),i=g&&b.isFunction(g[d])?g[d].apply(g,f):g;if(i!==g&&i!==j){h=i;return false;}}):this.each(function(){var g=b.data(this,a);g?g.option(d||{})._init():b.data(this,a,new c(d,this));});return h;};};b.Widget=function(a,c){arguments.length&&this._createWidget(a,c);};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(a,c){b.data(c,this.widgetName,this);this.element=b(c);this.options=b.extend(true,{},this.options,this._getCreateOptions(),a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy();});this._create();this._trigger("create");this._init();},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName];},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled");},widget:function(){return this.element;},option:function(a,c){var d=a;if(arguments.length===0){return b.extend({},this.options);}if(typeof a==="string"){if(c===j){return this.options[a];}d={};d[a]=c;}this._setOptions(d);return this;},_setOptions:function(a){var c=this;b.each(a,function(d,e){c._setOption(d,e);});return this;},_setOption:function(a,c){this.options[a]=c;if(a==="disabled"){this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",c);}return this;},enable:function(){return this._setOption("disabled",false);},disable:function(){return this._setOption("disabled",true);},_trigger:function(a,c,d){var e=this.options[a];c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();d=d||{};if(c.originalEvent){a=b.event.props.length;for(var f;a;){f=b.event.props[--a];c[f]=c.originalEvent[f];}}this.element.trigger(c,d);return !(b.isFunction(e)&&e.call(this.element[0],c,d)===false||c.isDefaultPrevented());}};})(jQuery);window.Modernizr=function(a,b,c){function z(a){j.cssText=a;}function A(a,b){return z(m.join(a+";")+(b||""));}function B(a,b){return typeof a===b;}function C(a,b){return !!~(""+a).indexOf(b);}function D(a,b){for(var d in a){var e=a[d];if(!C(e,"-")&&j[e]!==c){return b=="pfx"?e:!0;}}return !1;}function E(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c){return d===!1?a[e]:B(f,"function")?f.bind(d||b):f;}}return !1;}function F(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+o.join(d+" ")+d).split(" ");return B(b,"string")||B(b,"undefined")?D(e,b):(e=(a+" "+p.join(d+" ")+d).split(" "),E(e,b,c));}var d="2.6.2",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k,l={}.toString,m=" -webkit- -moz- -o- -ms- ".split(" "),n="Webkit Moz O ms",o=n.split(" "),p=n.toLowerCase().split(" "),q={},r={},s={},t=[],u=t.slice,v,w=function(a,c,d,e){var f,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10)){while(d--){j=b.createElement("div"),j.id=e?e[d]:h+(d+1),l.appendChild(j);}}return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=g.style.overflow,g.style.overflow="hidden",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i;},x={}.hasOwnProperty,y;!B(x,"undefined")&&!B(x.call,"undefined")?y=function(a,b){return x.call(a,b);}:y=function(a,b){return b in a&&B(a.constructor.prototype[b],"undefined");},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function"){throw new TypeError;}var d=u.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(u.call(arguments)));return Object(g)===g?g:f;}return c.apply(b,d.concat(u.call(arguments)));};return e;}),q.touch=function(){var c;return"ontouchstart" in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:w(["@media (",m.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=a.offsetTop===9;}),c;},q.backgroundsize=function(){return F("backgroundSize");},q.csstransforms3d=function(){var a=!!F("perspective");return a&&"webkitPerspective" in g.style&&w("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b,c){a=b.offsetLeft===9&&b.offsetHeight===3;}),a;},q.csstransitions=function(){return F("transition");};for(var G in q){y(q,G)&&(v=G.toLowerCase(),e[v]=q[G](),t.push((e[v]?"":"no-")+v));}return e.addTest=function(a,b){if(typeof a=="object"){for(var d in a){y(a,d)&&e.addTest(d,a[d]);}}else{a=a.toLowerCase();if(e[a]!==c){return e;}b=typeof b=="function"?b():b,typeof f!="undefined"&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b;}return e;},z(""),i=k=null,function(a,b){function k(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild);}function l(){var a=r.elements;return typeof a=="string"?a.split(" "):a;}function m(a){var b=i[a[g]];return b||(b={},h++,a[g]=h,i[h]=b),b;}function n(a,c,f){c||(c=b);if(j){return c.createElement(a);}f||(f=m(c));var g;return f.cache[a]?g=f.cache[a].cloneNode():e.test(a)?g=(f.cache[a]=f.createElem(a)).cloneNode():g=f.createElem(a),g.canHaveChildren&&!d.test(a)?f.frag.appendChild(g):g;}function o(a,c){a||(a=b);if(j){return a.createDocumentFragment();}c=c||m(a);var d=c.frag.cloneNode(),e=0,f=l(),g=f.length;for(;e<g;e++){d.createElement(f[e]);}return d;}function p(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return r.shivMethods?n(c,a,b):b.createElem(c);},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+l().join().replace(/\w+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")';})+");return n}")(r,b.frag);}function q(a){a||(a=b);var c=m(a);return r.shivCSS&&!f&&!c.hasCSS&&(c.hasCSS=!!k(a,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),j||p(a,c),a;}var c=a.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,e=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,f,g="_html5shiv",h=0,i={},j;(function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",f="hidden" in a,j=a.childNodes.length==1||function(){b.createElement("a");var a=b.createDocumentFragment();return typeof a.cloneNode=="undefined"||typeof a.createDocumentFragment=="undefined"||typeof a.createElement=="undefined";}();}catch(c){f=!0,j=!0;}})();var r={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:c.shivCSS!==!1,supportsUnknownElements:j,shivMethods:c.shivMethods!==!1,type:"default",shivDocument:q,createElement:n,createDocumentFragment:o};a.html5=r,q(b);}(this,b),e._version=d,e._prefixes=m,e._domPrefixes=p,e._cssomPrefixes=o,e.testProp=function(a){return D([a]);},e.testAllProps=F,e.testStyles=w,e.prefixed=function(a,b,c){return b?F(a,b,c):F(a,"pfx");},g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+t.join(" "):""),e;}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==o.call(a);}function e(a){return"string"==typeof a;}function f(){}function g(a){return !a||"loaded"==a||"complete"==a||"uninitialized"==a;}function h(){var a=p.shift();q=1,a?a.t?m(function(){("c"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1);},0):(a(),h()):q=0;}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&m(function(){t.removeChild(l);},50);for(var d in y[c]){y[c].hasOwnProperty(d)&&y[c][d].onload();}}}var j=j||B.errorTimeout,l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r);},p.splice(e,0,u),"img"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l));}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i("c"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this;}function k(){var a=B;return a.loader={load:j,i:0},a;}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance" in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&"[object Opera]"==o.call(a.opera),l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return"[object Array]"==o.call(a);},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a;}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++){g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));}for(f=0;f<b;f++){c=x[f](c);}return c;}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2;})));}function h(a,b){function c(a,c){if(a){if(e(a)){c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l();}),g(a,j,b,0,h);}else{if(Object(a)===a){for(n in m=function(){var b=0,c;for(c in a){a.hasOwnProperty(c)&&b++;}return b;}(),a){a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l();}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l();};}(k[n])),g(a[n],j,b,n,h));}}}}else{!c&&l();}}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i);}var i,j,l=this.yepnope.loader;if(e(a)){g(a,0,l,0);}else{if(w(a)){for(i=0;i<a.length;i++){j=a[i],e(j)?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);}}else{Object(a)===a&&h(a,l);}}},B.addPrefix=function(a,b){z[a]=b;},B.addFilter=function(a){x.push(a);},B.errorTimeout=10000,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete";},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d){k.setAttribute(o,d[o]);}c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null);},m(function(){l||(l=1,c(1));},e),i?k.onload():n.parentNode.insertBefore(k,n);},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d){e.setAttribute(j,d[j]);}g||(n.parentNode.insertBefore(e,n),m(c,0));};}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0));};jQuery(function($){$(document).ready(function(){var contentButton=[];var contentTop=[];var content=[];var lastScrollTop=0;var scrollDir="";var itemClass="";var itemHover="";var menuSize=null;var stickyHeight=0;var stickyMarginB=0;var currentMarginT=0;var topMargin=0;$(window).scroll(function(event){var st=$(this).scrollTop();if(st>lastScrollTop){scrollDir="down";}else{scrollDir="up";}lastScrollTop=st;});$.fn.stickUp=function(options){$(this).addClass("stuckMenu");var objn=0;if(options!=null){for(var o in options.parts){if(options.parts.hasOwnProperty(o)){content[objn]=options.parts[objn];objn++;}}if(objn==0){console.log("error:needs arguments");}itemClass=options.itemClass;itemHover=options.itemHover;if(options.topMargin!=null){if(options.topMargin=="auto"){topMargin=parseInt($(".stuckMenu").css("margin-top"));}else{if(isNaN(options.topMargin)&&options.topMargin.search("px")>0){topMargin=parseInt(options.topMargin.replace("px",""));}else{if(!isNaN(parseInt(options.topMargin))){topMargin=parseInt(options.topMargin);}else{console.log("incorrect argument, ignored.");topMargin=0;}}}}else{topMargin=0;}menuSize=$("."+itemClass).size();}stickyHeight=parseInt($(this).height());stickyMarginB=parseInt($(this).css("margin-bottom"));currentMarginT=parseInt($(this).next().closest("div").css("margin-top"));vartop=parseInt($(this).offset().top);};$(document).on("scroll",function(){varscroll=parseInt($(document).scrollTop());if(menuSize!=null){for(var i=0;i<menuSize;i++){contentTop[i]=$("#"+content[i]+"").offset().top;function bottomView(i){contentView=$("#"+content[i]+"").height()*0.4;testView=contentTop[i]-contentView;if(varscroll>testView){$("."+itemClass).removeClass(itemHover);$("."+itemClass+":eq("+i+")").addClass(itemHover);}else{if(varscroll<100){$("."+itemClass).removeClass(itemHover);$("."+itemClass+":eq(0)").addClass(itemHover);}}}if(scrollDir=="down"&&varscroll>contentTop[i]-100&&varscroll<contentTop[i]+100){$("."+itemClass).removeClass(itemHover);$("."+itemClass+":eq("+i+")").addClass(itemHover);}if(scrollDir=="up"){bottomView(i);}}}if(vartop<varscroll+topMargin){$(".wrapper").addClass("spHeight");$(".stuckMenu").addClass("isStuck");$(".stuckMenu").next().closest("div").css({"margin-top":stickyHeight+stickyMarginB+currentMarginT+"px"},10);$(".stuckMenu").css("position","fixed");$(".isStuck").css({top:"0px"},10,function(){});}if(varscroll+topMargin<vartop){$(".wrapper").removeClass("spHeight");$(".stuckMenu").removeClass("isStuck");$(".stuckMenu").next().closest("div").css({"margin-top":currentMarginT+"px"},10);$(".stuckMenu").css("position","relative");}});});});